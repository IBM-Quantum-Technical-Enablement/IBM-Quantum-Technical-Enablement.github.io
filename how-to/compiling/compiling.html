
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Using the Qiskit compiler &#8212; Enabing Technologies  documentation</title>
<script>
  document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
  document.documentElement.dataset.theme = localStorage.getItem("theme") || "light"
</script>

  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=92025949c220c2e29695" rel="stylesheet">
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=92025949c220c2e29695" rel="stylesheet">


  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/jupyter-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/thebelab.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />

  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=92025949c220c2e29695">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/thebelab-helper.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../_static/design-tabs.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.20.0/dist/embed-amd.js"></script>
    <script async="async" src="https://www.google-analytics.com/analytics.js"></script>
    <script>
                window.ga = window.ga || function () {
                    (ga.q = ga.q || []).push(arguments) };
                ga.l = +new Date;
                ga('create', 'UA-16824831-8', 'auto');
                ga('set', 'anonymizeIp', true);
                ga('send', 'pageview');
            </script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Dynamical Decoupling" href="../dynamical_decoupling/dynamical_decoupling.html" />
    <link rel="prev" title="Quick start guide" href="../quick/quick-start.html" /> 
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="docsearch:language" content="en"> 
<link
  rel="alternate"
  type="application/atom+xml"
  href="../../explore/atom.xml"
  title="Quantum Explorations"
/>
 
<style type="text/css">
  ul.ablog-archive {
    list-style: none;
    overflow: auto;
    margin-left: 0px;
  }
  ul.ablog-archive li {
    float: left;
    margin-right: 5px;
    font-size: 80%;
  }
  ul.postlist a {
    font-style: italic;
  }
  ul.postlist-style-disc {
    list-style-type: disc;
  }
  ul.postlist-style-none {
    list-style-type: none;
  }
  ul.postlist-style-circle {
    list-style-type: circle;
  }
</style>

  </head>
  
  
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="">
    <div class="bd-header-announcement container-fluid" id="banner">
      

    </div>

    
    <nav class="bd-header navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="bd-header__inner container-xl">

  <div id="navbar-start">
    
    
  


<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
    <img src="../../_static/logo.png" class="logo__image only-light" alt="Logo image">
    <img src="../../_static/dark_logo.png" class="logo__image only-dark" alt="Logo image">
  
  
</a>
    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="fas fa-bars"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="../howto.html">
  How to guides
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../explore.html">
  Explorations
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../hardware/hardware.html">
  IBM Quantum Hardware
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../events.html">
  Events
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../members.html">
  Members
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the site..." aria-label="Search the site..." autocomplete="off" >
</form>
      </div>
      
      <div class="navbar-end-item">
        <span id="theme-switch" class="btn btn-sm btn-outline-primary navbar-btn rounded-circle">
    <a class="theme-switch" data-mode="light"><i class="fas fa-sun"></i></a>
    <a class="theme-switch" data-mode="dark"><i class="far fa-moon"></i></a>
    <a class="theme-switch" data-mode="auto"><i class="fas fa-adjust"></i></a>
</span>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/IBM-Quantum-Technical-Enablement" rel="noopener" target="_blank" title="GitHub"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="bd-container container-xl">
      <div class="bd-container__inner row">
          

<!-- Only show if we have sidebars configured, else just a small margin  -->
<div class="bd-sidebar-primary col-12 col-md-3 bd-sidebar">
  <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the site..." aria-label="Search the site..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Quick start
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../quick/quick-start.html">
   Quick start guide
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Circuit compilation
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Using the Qiskit compiler
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Error suppression
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../dynamical_decoupling/dynamical_decoupling.html">
   Dynamical Decoupling
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Error mitigation
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../mitigation/M3/m3_mitigation.html">
   Mesurement error mitigation using M3
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Visualization
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../visualization/matplotlib.html">
   Matplotlib styles
  </a>
 </li>
</ul>

  </div>
</nav>
  </div>
  <div class="sidebar-end-items">
  </div>
</div>


          


<div class="bd-sidebar-secondary d-none d-xl-block col-xl-2 bd-toc">
  
    
    <div class="toc-item">
      
<div class="tocsection onthispage mt-5 pt-1 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#overview">
   Overview
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#summary">
   Summary
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#frontmatter">
   Frontmatter
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#circuit-compilation">
   Circuit compilation
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#basic-circuit-transpilation">
     Basic circuit transpilation
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#basic-compilation-pipeline">
   Basic compilation pipeline
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#system-basis-gates">
     System basis gates
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#initial-qubit-layout">
     Initial qubit layout
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#setting-initial-layout">
       Setting
       <code class="docutils literal notranslate">
        <span class="pre">
         initial_layout
        </span>
       </code>
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#swap-mapping">
     SWAP mapping
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#setting-the-level-of-optimization">
   Setting the level of optimization
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#optimization-level-0">
     <code class="docutils literal notranslate">
      <span class="pre">
       optimization_level=0
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#optimization-level-1">
     <code class="docutils literal notranslate">
      <span class="pre">
       optimization_level=1
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#optimization-level-2">
     <code class="docutils literal notranslate">
      <span class="pre">
       optimization_level=2
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#optimization-level-3">
     <code class="docutils literal notranslate">
      <span class="pre">
       optimization_level=3
      </span>
     </code>
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-best-general-choice-for-transpile-options">
   The best general choice for
   <code class="docutils literal notranslate">
    <span class="pre">
     transpile
    </span>
   </code>
   options
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#things-not-to-do">
   Things NOT to do
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#being-smarter">
   Being smarter
  </a>
 </li>
</ul>

</nav>
    </div>
    
    <div class="toc-item">
      
    </div>
    
  
</div>


          
          
          <div class="bd-content col-12 col-md-9 col-xl-7">
              
              <article class="bd-article" role="main">
                 <section class="tex2jax_ignore mathjax_ignore" id="using-the-qiskit-compiler">
<h1>Using the Qiskit compiler<a class="headerlink" href="#using-the-qiskit-compiler" title="Permalink to this heading">#</a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this heading">#</a></h2>
<p>Here we will cover how to use the Qiskit compiler to the best extent possible for most common use cases.  As things change frequently, please see the version numbers at the bottom of the notebook to see which version of Qiskit was used in generating the results presented here.  Those interested in just getting a quick summary of the material presented here may do so in the next section.</p>
</section>
<section id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this heading">#</a></h2>
<p>Although there are a myriad of compilation options in Qiskit, for a given quantum circuit <code class="docutils literal notranslate"><span class="pre">qc</span></code> and target system called <code class="docutils literal notranslate"><span class="pre">backend</span></code>, the <code class="docutils literal notranslate"><span class="pre">transpile</span></code> function should be called with the <code class="docutils literal notranslate"><span class="pre">optimization_level=3</span></code> setting on Qiskit 0.19+:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">trans_qc</span> <span class="o">=</span> <span class="n">transpile</span><span class="p">(</span><span class="n">qc</span><span class="p">,</span> <span class="n">backend</span><span class="p">,</span> <span class="n">optimization_level</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<p>Additionally, due to the stochastic nature of the SWAP mappers in Qiskit, ideally one should <code class="docutils literal notranslate"><span class="pre">transpile</span></code> multiple copies of a circuit and take the one with the lowest depth (<code class="docutils literal notranslate"><span class="pre">qc.depth()</span></code>).  Users should also explore mapping their circuits to the target system by hand via setting of the <code class="docutils literal notranslate"><span class="pre">initial_layout</span></code> option in <code class="docutils literal notranslate"><span class="pre">transpile</span></code> to best match the topology of the device and it error characteristics.  At this stage compiler maturity smart hand-mapping generally beats automated layout methods.</p>
</section>
<section id="frontmatter">
<h2>Frontmatter<a class="headerlink" href="#frontmatter" title="Permalink to this heading">#</a></h2>
<p>Here we load the modules needed for the rest of the notebook, as well as our locally stored IBM Quantum account.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">qiskit</span> <span class="kn">import</span> <span class="o">*</span>

<span class="o">%</span><span class="k">config</span> InlineBackend.figure_format = &#39;retina&#39;
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="n">plt</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s1">&#39;ibmq-dark&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">IBMQ</span><span class="o">.</span><span class="n">load_account</span><span class="p">();</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="circuit-compilation">
<h2>Circuit compilation<a class="headerlink" href="#circuit-compilation" title="Permalink to this heading">#</a></h2>
<p>To understand how the compiler works we will consider a six-qubit GHZ state written so that a single-qubit requires <span class="math notranslate nohighlight">\(5\)</span>-partite connectivity; outside the maximum Heavy-hex topology connectivity of 3.  Thus this circuit will require swap gates to satisfy the topology constraints.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">N</span> <span class="o">=</span> <span class="mi">6</span>
<span class="n">qc</span> <span class="o">=</span> <span class="n">QuantumCircuit</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>
<span class="n">qc</span><span class="o">.</span><span class="n">h</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">qc</span><span class="o">.</span><span class="n">cx</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">N</span><span class="p">))</span>
<span class="n">qc</span><span class="o">.</span><span class="n">measure_all</span><span class="p">()</span>
<span class="n">qc</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="s1">&#39;mpl&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/e39b661475335b78eeb22047f77e84ca3bbb48890f3c2ab19814b2d43a5d915d.png" src="../../_images/e39b661475335b78eeb22047f77e84ca3bbb48890f3c2ab19814b2d43a5d915d.png" />
</div>
</div>
<p>Lets select our target 27Q system:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">provider</span> <span class="o">=</span> <span class="n">IBMQ</span><span class="o">.</span><span class="n">get_provider</span><span class="p">(</span><span class="n">group</span><span class="o">=</span><span class="s1">&#39;deployed&#39;</span><span class="p">)</span>
<span class="n">backend</span> <span class="o">=</span> <span class="n">provider</span><span class="o">.</span><span class="n">backend</span><span class="o">.</span><span class="n">ibmq_mumbai</span>
</pre></div>
</div>
</div>
</div>
<section id="basic-circuit-transpilation">
<h3>Basic circuit transpilation<a class="headerlink" href="#basic-circuit-transpilation" title="Permalink to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">trans_qc</span> <span class="o">=</span> <span class="n">transpile</span><span class="p">(</span><span class="n">qc</span><span class="p">,</span> <span class="n">backend</span><span class="p">)</span>
<span class="n">trans_qc</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="s1">&#39;mpl&#39;</span><span class="p">,</span> <span class="n">fold</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/f7ea2cdf77e8c183817d7ed0d8b77e57397593338c893314120d96425ecedd16.png" src="../../_images/f7ea2cdf77e8c183817d7ed0d8b77e57397593338c893314120d96425ecedd16.png" />
</div>
</div>
<p>Things to note:</p>
<ol class="arabic simple">
<li><p>Obviously, the circuit now contains as many qubits as the target system.</p></li>
<li><p>Our qubits have been mapped to physical qubits and have been permuted at the beginning.</p></li>
<li><p>Our <code class="docutils literal notranslate"><span class="pre">H</span></code> gate has been re-written as a collection of three 1Q gates.</p></li>
<li><p>The number of CNOT gates has increased, in particular there are groups of three CNOT gates added to the circuit.</p></li>
<li><p>The measurements are again permuted from where one expects them to be based on the initial qubit ordering.</p></li>
</ol>
<p>What your circuit looks like above is likely different from the one shown here.  This is because some parts of the transpilation route are stochastic; they contain algorithms that rely on pseudorandom number generation.  To see this lets <code class="docutils literal notranslate"><span class="pre">transpile</span></code> the same circuit again (may have to do more than once since it is random):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">trans_qc</span> <span class="o">=</span> <span class="n">transpile</span><span class="p">(</span><span class="n">qc</span><span class="p">,</span> <span class="n">backend</span><span class="p">)</span>
<span class="n">trans_qc</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="s1">&#39;mpl&#39;</span><span class="p">,</span> <span class="n">fold</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/f658c3276ea5f40973e2472d85780abd2a940b132518c4d4678bc699242dc162.png" src="../../_images/f658c3276ea5f40973e2472d85780abd2a940b132518c4d4678bc699242dc162.png" />
</div>
</div>
</section>
</section>
<section id="basic-compilation-pipeline">
<h2>Basic compilation pipeline<a class="headerlink" href="#basic-compilation-pipeline" title="Permalink to this heading">#</a></h2>
<p>Compilation, in it simplest form, involves the following steps:</p>
<ol class="arabic simple">
<li><p>Express circuit in terms of systems native gate set.</p></li>
<li><p>Select the initial virtual to physical qubit mapping.</p></li>
<li><p>Add SWAP gates to circuit to satisfy topology.</p></li>
<li><p>Optimize 1Q and 2Q gates.</p></li>
</ol>
<section id="system-basis-gates">
<h3>System basis gates<a class="headerlink" href="#system-basis-gates" title="Permalink to this heading">#</a></h3>
<p>Quantum computation greatly benefits from the fact that any computation can be written in terms of polynomial numbers of gates selected from a universal gate set that itself is comprised of a finite number of elements.  This “digitizes” the computation into successive steps.  Alternatives are a “pulse” based, continuous evolution, or ideally, going from initial to final state in a single step by forming the exact desired unitary.  This latter option is rarely, if ever, achievable due to physical constraints, amongst other complications.</p>
<img alt="../../_images/propagate.png" src="../../_images/propagate.png" />
<p>In Qiskit, universal gate sets are called <code class="docutils literal notranslate"><span class="pre">basis_gates</span></code>, and in general are over-complete sets. The <code class="docutils literal notranslate"><span class="pre">basis_gates</span></code> for IBM Quantum systems are found in the <code class="docutils literal notranslate"><span class="pre">backend.configuration()</span></code></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">backend</span><span class="o">.</span><span class="n">configuration</span><span class="p">()</span><span class="o">.</span><span class="n">basis_gates</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;id&#39;, &#39;rz&#39;, &#39;sx&#39;, &#39;x&#39;, &#39;cx&#39;, &#39;reset&#39;]
</pre></div>
</div>
</div>
</div>
<p>A few things to note:</p>
<ol class="arabic simple">
<li><p>For 1Q gates, IBM Quantum systems can only do <code class="docutils literal notranslate"><span class="pre">sx</span></code> (<span class="math notranslate nohighlight">\(\sqrt{x}\)</span>) and <code class="docutils literal notranslate"><span class="pre">x</span></code> gates, along with arbitrary z-axis rotations via <code class="docutils literal notranslate"><span class="pre">rz</span></code>.</p></li>
<li><p>All z-rotations are “virtual” gates; there is no rotations of the qubits.  All z-rotations get mapped to phase-angles that get applied to all gates that come later.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">sx</span></code> and <code class="docutils literal notranslate"><span class="pre">x</span></code> gates take the same amount of time to impliment; they differ by the amplitude of the underlying pulse that causes the rotation.</p></li>
<li><p>Currently, the only 2Q gate is the <code class="docutils literal notranslate"><span class="pre">cx</span></code> (CNOT) gate.  This will be relaxed in the future to expose native <code class="docutils literal notranslate"><span class="pre">cr</span></code> (cross-resonance) gates.</p></li>
<li><p>On IBM Quantum systems, the identity gate <code class="docutils literal notranslate"><span class="pre">id</span></code> currently is represented as an idle time of the same width as an <code class="docutils literal notranslate"><span class="pre">sx</span></code> gate.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">reset</span></code> is not actually a gate (non-unitary) but is here due to legacy implementation issues.</p></li>
</ol>
<p>In our GHZ circuit the <code class="docutils literal notranslate"><span class="pre">h</span></code> gate got converted into a single <code class="docutils literal notranslate"><span class="pre">sx</span></code> gate and two <code class="docutils literal notranslate"><span class="pre">rz</span></code> rotations:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">qc_1q</span> <span class="o">=</span> <span class="n">QuantumCircuit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">qc_1q</span><span class="o">.</span><span class="n">h</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">transpile</span><span class="p">(</span><span class="n">qc_1q</span><span class="p">,</span> <span class="n">basis_gates</span><span class="o">=</span><span class="n">backend</span><span class="o">.</span><span class="n">configuration</span><span class="p">()</span><span class="o">.</span><span class="n">basis_gates</span><span class="p">)</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="s1">&#39;mpl&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/308e12bc1935b151dc83c9052c23619fee9c8977c3af50860614da1ca1be6e39.png" src="../../_images/308e12bc1935b151dc83c9052c23619fee9c8977c3af50860614da1ca1be6e39.png" />
</div>
</div>
<p>For a generic 1Q gate, the worst-case decomposition is comprised of two <code class="docutils literal notranslate"><span class="pre">sx</span></code> gates and three virtual <code class="docutils literal notranslate"><span class="pre">rz</span></code> rotations of various angles:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">qc_1q</span> <span class="o">=</span> <span class="n">QuantumCircuit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">qc_1q</span><span class="o">.</span><span class="n">rx</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">transpile</span><span class="p">(</span><span class="n">qc_1q</span><span class="p">,</span> <span class="n">basis_gates</span><span class="o">=</span><span class="n">backend</span><span class="o">.</span><span class="n">configuration</span><span class="p">()</span><span class="o">.</span><span class="n">basis_gates</span><span class="p">)</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="s1">&#39;mpl&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/420353c474621227ba117dd6ac2363bf86099ef0b193ff6bc75a8f92113d3dad.png" src="../../_images/420353c474621227ba117dd6ac2363bf86099ef0b193ff6bc75a8f92113d3dad.png" />
</div>
</div>
</section>
<section id="initial-qubit-layout">
<h3>Initial qubit layout<a class="headerlink" href="#initial-qubit-layout" title="Permalink to this heading">#</a></h3>
<p>The qubits in a circuit are “virtual” qubits in that they exist in abstract only.  To perform the actual computation we must must map these virtual qubits onto the physical qubits of the target quantum system.  There is no unique way to do this, the mapping need only be bijective, and the choice of <code class="docutils literal notranslate"><span class="pre">initial_layout</span></code> can greatly affect the performance of later SWAP mapping, as well as overall fidelity is the selected qubits are overly error prone.</p>
<img alt="../../_images/mapping.png" src="../../_images/mapping.png" />
<section id="setting-initial-layout">
<h4>Setting <code class="docutils literal notranslate"><span class="pre">initial_layout</span></code><a class="headerlink" href="#setting-initial-layout" title="Permalink to this heading">#</a></h4>
<p>Qiskit will automatically pick an <code class="docutils literal notranslate"><span class="pre">initial_layout</span></code> for you.  The choice of layout depends on the <code class="docutils literal notranslate"><span class="pre">optimization_level</span></code> chosen (default is <code class="docutils literal notranslate"><span class="pre">optimization_level=1</span></code>, as well as additional configuration options.  We will discuss <code class="docutils literal notranslate"><span class="pre">optimization_level</span></code> later, and instead focus on how to manually set the <code class="docutils literal notranslate"><span class="pre">initial_layout</span></code>.  Often times it is best to do so after looking at the calibration data to select the qubits with lowest 1Q errors, measurement errors, and associated <code class="docutils literal notranslate"><span class="pre">cx</span></code> gate errors.</p>
<p>The calibration data can easily be found on the IBM Quantum  website, e.g. <a class="reference external" href="https://quantum-computing.ibm.com/services?services=systems&amp;system=ibmq_mumbai">Mumbai calibration data</a>.  Alternatively, it can be found via Qiskit.</p>
<p>The initial virtual -&gt; physical mapping can be manually set using the <code class="docutils literal notranslate"><span class="pre">initial_layout</span></code> argument in <code class="docutils literal notranslate"><span class="pre">transpile</span></code>.  This variable takes a list, amongst other options, where the 0th element tells the transpiler which physical qubit to map virtual qubit 0 to, etc.</p>
<p>Because virtual qubit 0 needs large amounts of connectivity lets map it to physical qubit 1, and then select the other qubits so that they are nearest neighbor as possible.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">trans_qc</span> <span class="o">=</span> <span class="n">transpile</span><span class="p">(</span><span class="n">qc</span><span class="p">,</span> <span class="n">backend</span><span class="p">,</span> <span class="n">initial_layout</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="n">trans_qc</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="s1">&#39;mpl&#39;</span><span class="p">,</span> <span class="n">fold</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/c5f488c1b237f667e7d979086229ed068f2820ae0408321118c07cf0af1038df.png" src="../../_images/c5f488c1b237f667e7d979086229ed068f2820ae0408321118c07cf0af1038df.png" />
</div>
</div>
<p>We are also free to pick disjoint sets of physical qubits.  This is usually not a good idea but none the less can be done.  Here is a particularly bad choice:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">trans_qc</span> <span class="o">=</span> <span class="n">transpile</span><span class="p">(</span><span class="n">qc</span><span class="p">,</span> <span class="n">backend</span><span class="p">,</span> <span class="n">initial_layout</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">26</span><span class="p">])</span>
<span class="n">trans_qc</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="s1">&#39;mpl&#39;</span><span class="p">,</span> <span class="n">fold</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/7a47ac372c815beecef7624b63bae5d369675ef505e6ccb40739b78919953660.png" src="../../_images/7a47ac372c815beecef7624b63bae5d369675ef505e6ccb40739b78919953660.png" />
</div>
</div>
</section>
</section>
<section id="swap-mapping">
<h3>SWAP mapping<a class="headerlink" href="#swap-mapping" title="Permalink to this heading">#</a></h3>
<p>One of the most important tasks of circuit transpilation/compilation is in the inserting of <code class="docutils literal notranslate"><span class="pre">swap</span></code> gates so as to allow for the limited connectivity of many quantum processors. <code class="docutils literal notranslate"><span class="pre">cx</span></code> gates can only be done between those pairs of qubits listed in the systems coupling map:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">backend</span><span class="o">.</span><span class="n">configuration</span><span class="p">()</span><span class="o">.</span><span class="n">coupling_map</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[[0, 1], [1, 0], [1, 2], [1, 4], [2, 1], [2, 3], [3, 2], [3, 5], [4, 1], [4, 7], [5, 3], [5, 8], [6, 7], [7, 4], [7, 6], [7, 10], [8, 5], [8, 9], [8, 11], [9, 8], [10, 7], [10, 12], [11, 8], [11, 14], [12, 10], [12, 13], [12, 15], [13, 12], [13, 14], [14, 11], [14, 13], [14, 16], [15, 12], [15, 18], [16, 14], [16, 19], [17, 18], [18, 15], [18, 17], [18, 21], [19, 16], [19, 20], [19, 22], [20, 19], [21, 18], [21, 23], [22, 19], [22, 25], [23, 21], [23, 24], [24, 23], [24, 25], [25, 22], [25, 24], [25, 26], [26, 25]]
</pre></div>
</div>
</div>
</div>
<p>and <code class="docutils literal notranslate"><span class="pre">swap</span></code> gates must be added to move the states of qubits around so that they match one of these coupling edges.</p>
<p>A <code class="docutils literal notranslate"><span class="pre">swap</span></code> gate is equal to 3 <code class="docutils literal notranslate"><span class="pre">cx</span></code> gates, and each <code class="docutils literal notranslate"><span class="pre">cx</span></code> is ~20x more noisy than 1Q gates; <code class="docutils literal notranslate"><span class="pre">swap</span></code> gates are expensive, should be minimized as best as possible.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">swap_qc</span> <span class="o">=</span> <span class="n">QuantumCircuit</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">swap_qc</span><span class="o">.</span><span class="n">swap</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="n">swap_qc</span><span class="o">.</span><span class="n">decompose</span><span class="p">()</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="s1">&#39;mpl&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/9c3b3b9addb71254889a160e9c1a282a73fe4df5064e991f20a69938761d4a7c.png" src="../../_images/9c3b3b9addb71254889a160e9c1a282a73fe4df5064e991f20a69938761d4a7c.png" />
</div>
</div>
<p>Finding the minimum number of <code class="docutils literal notranslate"><span class="pre">swap</span></code> gates needed for a general circuit and system topology is NP-Hard; It becomes combinatorics and scales exponentially.  To get around this the primary SWAP mappers in Qiskit use stochastic heuristics that yield a good, but perhaps not ideal, SWAP mapping.</p>
<p>The default Qiskit SWAP mapper models the system topology as an adjacency graph, upon which the edge weights of the graph are drawn from a randomly sampled normal distribution.</p>
<img alt="../../_images/default_swap.png" src="../../_images/default_swap.png" />
<p>This breaks the degeneracy of multiple paths, and gives a unique minimum value at the cost of making the SWAP mapping routine stochastic in nature.  In practice this means that the output from <code class="docutils literal notranslate"><span class="pre">transpile</span></code> is not unique, and that repeated transpilation may be required to find the lowest cost SWAP mapping.</p>
<p>Lets transpile our circuit multiple times and look to see how many <code class="docutils literal notranslate"><span class="pre">swap</span></code> gates are added each time.  Additionally, we will look to see if our custom <code class="docutils literal notranslate"><span class="pre">initial_layout</span></code> works any better.  To make sure the <code class="docutils literal notranslate"><span class="pre">swap</span></code> gates are not converted to 3 <code class="docutils literal notranslate"><span class="pre">cx</span></code> gates each time, we will add <code class="docutils literal notranslate"><span class="pre">swap</span></code> to the basis gates (this will not run on hardware).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">trans_qcs</span> <span class="o">=</span> <span class="n">transpile</span><span class="p">([</span><span class="n">qc</span><span class="p">]</span><span class="o">*</span><span class="mi">100</span><span class="p">,</span> <span class="n">backend</span><span class="p">,</span> <span class="n">basis_gates</span><span class="o">=</span><span class="n">backend</span><span class="o">.</span><span class="n">configuration</span><span class="p">()</span><span class="o">.</span><span class="n">basis_gates</span><span class="o">+</span><span class="p">[</span><span class="s1">&#39;swap&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">trans_qcs_init</span> <span class="o">=</span> <span class="n">transpile</span><span class="p">([</span><span class="n">qc</span><span class="p">]</span><span class="o">*</span><span class="mi">100</span><span class="p">,</span> <span class="n">backend</span><span class="p">,</span> <span class="n">basis_gates</span><span class="o">=</span><span class="n">backend</span><span class="o">.</span><span class="n">configuration</span><span class="p">()</span><span class="o">.</span><span class="n">basis_gates</span><span class="o">+</span><span class="p">[</span><span class="s1">&#39;swap&#39;</span><span class="p">],</span>
                           <span class="n">initial_layout</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">swap_count</span> <span class="o">=</span> <span class="p">[</span><span class="n">circ</span><span class="o">.</span><span class="n">count_ops</span><span class="p">()[</span><span class="s1">&#39;swap&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">circ</span> <span class="ow">in</span> <span class="n">trans_qcs</span><span class="p">]</span>
<span class="n">swap_count_init</span> <span class="o">=</span> <span class="p">[</span><span class="n">circ</span><span class="o">.</span><span class="n">count_ops</span><span class="p">()[</span><span class="s1">&#39;swap&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">circ</span> <span class="ow">in</span> <span class="n">trans_qcs_init</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">swap_count</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Default layout&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">swap_count_init</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Custom layout&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Swaps added&#39;</span><span class="p">);</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/06131ebce46b23ccd4435c059c39e741d1f7a5832535cefb6050982153ebb287.png" src="../../_images/06131ebce46b23ccd4435c059c39e741d1f7a5832535cefb6050982153ebb287.png" />
</div>
</div>
<p>We see that there is a distribution in terms of the number of added <code class="docutils literal notranslate"><span class="pre">swap</span></code> gates, and that by being a bit smarter in our choice of <code class="docutils literal notranslate"><span class="pre">initial_layout</span></code> we were able to bring the number down.</p>
<p>What does this mean in practice?</p>
<p>Since qiskit-terra 0.21+, Qiskit performs several trials of finding the best layout and swap mapping by itself. Transpiling multiple times (~10 or more) and taking the one with the shortest depth can still be a useful optimization. For a single circuit this can be done as follows:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">trans_qcs_init</span> <span class="o">=</span> <span class="n">transpile</span><span class="p">([</span><span class="n">qc</span><span class="p">]</span><span class="o">*</span><span class="mi">100</span><span class="p">,</span> <span class="n">backend</span><span class="p">,</span> <span class="n">basis_gates</span><span class="o">=</span><span class="n">backend</span><span class="o">.</span><span class="n">configuration</span><span class="p">()</span><span class="o">.</span><span class="n">basis_gates</span><span class="p">,</span>
                            <span class="n">initial_layout</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">depths</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">circ</span><span class="o">.</span><span class="n">depth</span><span class="p">()</span> <span class="k">for</span> <span class="n">circ</span> <span class="ow">in</span> <span class="n">trans_qcs_init</span><span class="p">])</span>
<span class="n">idx</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">argmin</span><span class="p">(</span><span class="n">depths</span><span class="p">)</span>
<span class="n">best_qc</span> <span class="o">=</span> <span class="n">trans_qcs_init</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span>
<span class="n">best_qc</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="s1">&#39;mpl&#39;</span><span class="p">,</span> <span class="n">fold</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">idle_wires</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/110047af85e50657d2fd531bacfab08d3be26eaad83cb0d5e4a344e1e5903617.png" src="../../_images/110047af85e50657d2fd531bacfab08d3be26eaad83cb0d5e4a344e1e5903617.png" />
</div>
</div>
<ol class="arabic simple" start="2">
<li><p>For repeatability the best circuit can be saved  Or instead, one can transpile multiple times fixing the <code class="docutils literal notranslate"><span class="pre">seed_transpiler</span></code> option with a list of specified integers.  The integer seeds the random number generator used by the SWAP mapper, and allows you to reproduce the circuit again.</p></li>
</ol>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">seeds</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">))</span>

<span class="n">min_depth</span> <span class="o">=</span> <span class="mf">1e99</span>
<span class="n">best_circ</span> <span class="o">=</span> <span class="kc">None</span>
<span class="n">best_seed</span> <span class="o">=</span> <span class="kc">None</span>
<span class="k">for</span> <span class="n">kk</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
    <span class="n">trans_qc_seeded</span> <span class="o">=</span> <span class="n">transpile</span><span class="p">(</span><span class="n">qc</span><span class="p">,</span> <span class="n">backend</span><span class="p">,</span> <span class="n">basis_gates</span><span class="o">=</span><span class="n">backend</span><span class="o">.</span><span class="n">configuration</span><span class="p">()</span><span class="o">.</span><span class="n">basis_gates</span><span class="p">,</span>
                                 <span class="n">initial_layout</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">seed_transpiler</span><span class="o">=</span><span class="n">seeds</span><span class="p">[</span><span class="n">kk</span><span class="p">])</span>
    <span class="n">temp_depth</span> <span class="o">=</span> <span class="n">trans_qc_seeded</span><span class="o">.</span><span class="n">depth</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">temp_depth</span> <span class="o">&lt;</span> <span class="n">min_depth</span><span class="p">:</span>
        <span class="n">min_depth</span> <span class="o">=</span> <span class="n">temp_depth</span>
        <span class="n">best_seed</span> <span class="o">=</span> <span class="n">seeds</span><span class="p">[</span><span class="n">kk</span><span class="p">]</span>
        <span class="n">best_circ</span> <span class="o">=</span> <span class="n">trans_qc_seeded</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">best_seed</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span> <span class="n">best_circ</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="s1">&#39;mpl&#39;</span><span class="p">,</span> <span class="n">fold</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">idle_wires</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/110047af85e50657d2fd531bacfab08d3be26eaad83cb0d5e4a344e1e5903617.png" src="../../_images/110047af85e50657d2fd531bacfab08d3be26eaad83cb0d5e4a344e1e5903617.png" />
</div>
</div>
<p>Once the <code class="docutils literal notranslate"><span class="pre">best_seed</span></code> value is found we can then use that to deterministically regenerate the optimal circuit.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">transpile</span><span class="p">(</span><span class="n">qc</span><span class="p">,</span> <span class="n">backend</span><span class="p">,</span> <span class="n">basis_gates</span><span class="o">=</span><span class="n">backend</span><span class="o">.</span><span class="n">configuration</span><span class="p">()</span><span class="o">.</span><span class="n">basis_gates</span><span class="p">,</span>
          <span class="n">initial_layout</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">seed_transpiler</span><span class="o">=</span><span class="n">best_seed</span><span class="p">)</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="s1">&#39;mpl&#39;</span><span class="p">,</span> <span class="n">fold</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">idle_wires</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/110047af85e50657d2fd531bacfab08d3be26eaad83cb0d5e4a344e1e5903617.png" src="../../_images/110047af85e50657d2fd531bacfab08d3be26eaad83cb0d5e4a344e1e5903617.png" />
</div>
</div>
</section>
</section>
<section id="setting-the-level-of-optimization">
<h2>Setting the level of optimization<a class="headerlink" href="#setting-the-level-of-optimization" title="Permalink to this heading">#</a></h2>
<p>Much like standard compiler tool chains where one can specific the level of code optimization, e.g. <code class="docutils literal notranslate"><span class="pre">-O3</span></code>, it is possible to specify the level of quantum circuit optimization that <code class="docutils literal notranslate"><span class="pre">transpile</span></code> performs via the <code class="docutils literal notranslate"><span class="pre">optimization_level</span></code> keyword argument where the level is specified by an integer from 0 to 3.  The basic overview of each option is as follows:</p>
<section id="optimization-level-0">
<h3><code class="docutils literal notranslate"><span class="pre">optimization_level=0</span></code><a class="headerlink" href="#optimization-level-0" title="Permalink to this heading">#</a></h3>
<ol class="arabic simple">
<li><p>Convert to target basis gate set.</p></li>
<li><p>Choose a trivial layout that maps virtual qubit <span class="math notranslate nohighlight">\(i\)</span> to physical qubit <span class="math notranslate nohighlight">\(i\)</span>.</p></li>
</ol>
<div class="alert alert-warning">
<font style="font-family:'Courier New'"> optimization_level=0</font> orders qubits sequentially from <font style="font-family:'Courier New'"> 0...N-1</font>.  On 27-qubit Falcon systems this ordering is usually very sub-optimal due to the column-based qubit ordering of those systems.
</div><ol class="arabic simple" start="3">
<li><p>SWAP map with the default Qiskit SWAP mapper.</p></li>
<li><p>No 1Q or 2Q gate optimization.</p></li>
</ol>
</section>
<section id="optimization-level-1">
<h3><code class="docutils literal notranslate"><span class="pre">optimization_level=1</span></code><a class="headerlink" href="#optimization-level-1" title="Permalink to this heading">#</a></h3>
<ol class="arabic simple">
<li><p>Convert to target basis gate set.</p></li>
<li><p>Choose a trivial layout that maps virtual qubit <span class="math notranslate nohighlight">\(i\)</span> to physical qubit <span class="math notranslate nohighlight">\(i\)</span>.</p></li>
</ol>
<div class="alert alert-warning">
<font style="font-family:'Courier New'"> optimization_level=1</font> orders qubits sequentially from <font style="font-family:'Courier New'"> 0...N-1</font>.  On 27-qubit Falcon systems this ordering is usually very sub-optimal due to the column-based qubit ordering of those systems.
</div><ol class="arabic simple" start="3">
<li><p>SWAP map using the Sabre routing method.</p></li>
<li><p>Basic 1Q and 2Q gate optimizations.</p></li>
</ol>
</section>
<section id="optimization-level-2">
<h3><code class="docutils literal notranslate"><span class="pre">optimization_level=2</span></code><a class="headerlink" href="#optimization-level-2" title="Permalink to this heading">#</a></h3>
<ol class="arabic simple">
<li><p>Convert to target basis gate set.</p></li>
<li><p>Choose a dense (high-connectivity), low-error, initial qubit layout.</p></li>
<li><p>SWAP map using the Sabre routing method.</p></li>
<li><p>Medium 1Q and 2Q gate optimizations, e.g. commutative cancellation.</p></li>
</ol>
</section>
<section id="optimization-level-3">
<h3><code class="docutils literal notranslate"><span class="pre">optimization_level=3</span></code><a class="headerlink" href="#optimization-level-3" title="Permalink to this heading">#</a></h3>
<ol class="arabic simple">
<li><p>Convert to target basis gate set.</p></li>
<li><p>Select an <code class="docutils literal notranslate"><span class="pre">initial_layout</span></code> based on the Sabre algorithm, taking into account readout and 2-qubit (CX) errors.</p></li>
<li><p>SWAP map using the Sabre routing method.</p></li>
<li><p>Full 1Q and 2Q gate optimizations, e.g. 2Q block collection and consolidation (KAK decomposition) and approximate unitary synthesis.</p></li>
</ol>
<p><a class="reference external" href="https://arxiv.org/abs/1809.02573">Sabre layout and routing</a> selects a good layout by SWAP mapping the circuit in both the froward and reverse direction using the final SWAP layout as the initial layout of the next iteration.  The first layout selection is random.  SWAP placement is done via a heuristic that penalizes previously used qubits and a random choice of SWAP gates when there is a tie for the cost function.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">o3_qc</span> <span class="o">=</span> <span class="n">transpile</span><span class="p">([</span><span class="n">qc</span><span class="p">]</span><span class="o">*</span><span class="mi">100</span><span class="p">,</span> <span class="n">backend</span><span class="p">,</span>
                  <span class="n">basis_gates</span><span class="o">=</span><span class="n">backend</span><span class="o">.</span><span class="n">configuration</span><span class="p">()</span><span class="o">.</span><span class="n">basis_gates</span><span class="o">+</span><span class="p">[</span><span class="s1">&#39;swap&#39;</span><span class="p">],</span>
                  <span class="n">optimization_level</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">o3_swap_count</span> <span class="o">=</span> <span class="p">[</span><span class="n">circ</span><span class="o">.</span><span class="n">count_ops</span><span class="p">()[</span><span class="s1">&#39;swap&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">circ</span> <span class="ow">in</span> <span class="n">o3_qc</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">o3_swap_count</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Sabre layout &amp; SWAP&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Swaps added&#39;</span><span class="p">);</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/d2a164086c8b2e686be96ef802e7934458ae868de3a7650885e6d031a40c9f55.png" src="../../_images/d2a164086c8b2e686be96ef802e7934458ae868de3a7650885e6d031a40c9f55.png" />
</div>
</div>
</section>
</section>
<section id="the-best-general-choice-for-transpile-options">
<h2>The best general choice for <code class="docutils literal notranslate"><span class="pre">transpile</span></code> options<a class="headerlink" href="#the-best-general-choice-for-transpile-options" title="Permalink to this heading">#</a></h2>
<p>By default users should select <code class="docutils literal notranslate"><span class="pre">optimization_level=3</span></code> in Qiskit <code class="docutils literal notranslate"><span class="pre">0.19+</span></code></p>
<p>Additionally, one can optionally transpile a given circuit multiple times (at least ~10) to find the best mapping.  A more in-depth investigation into this can be found in <a class="reference external" href="https://nonhermitian.org/posts/2021/2021-10-31-best_swap_mapper_qiskit.html">this blog post</a>.</p>
</section>
<section id="things-not-to-do">
<h2>Things NOT to do<a class="headerlink" href="#things-not-to-do" title="Permalink to this heading">#</a></h2>
<p>The following is a list of things that, in general, one should not set:</p>
<ol class="arabic simple">
<li><p>Never use anything but the default (‘stochastic’) or <code class="docutils literal notranslate"><span class="pre">sabre</span></code> SWAP mappers.  Other options that can be passed to <code class="docutils literal notranslate"><span class="pre">routing_method</span></code> are <code class="docutils literal notranslate"><span class="pre">basic</span></code> and <code class="docutils literal notranslate"><span class="pre">lookahead</span></code>. <code class="docutils literal notranslate"><span class="pre">basic</span></code> is for learning purposes only, and <code class="docutils literal notranslate"><span class="pre">lookahead</span></code> is not really supported, and will crash and/or take a very long time.</p></li>
<li><p>Never set <code class="docutils literal notranslate"><span class="pre">layout_method='noise_adaptive'</span></code>.  This routine will attempt to find the best layout based on the noise properties of the system.  However in doing so it greatly increases the number of SWAP gates that are added to the circuit.  The result is usually a large drop in the fidelity of the output.</p></li>
</ol>
</section>
<section id="being-smarter">
<h2>Being smarter<a class="headerlink" href="#being-smarter" title="Permalink to this heading">#</a></h2>
<p>Often there is a smarter way to encode a circuit given knowledge of the topology and/or feature set of the system.  In the case of our GHZ state it is possible to rewrite the circuit to match a linear nearest-neighbor topology, and thus require no additional SWAP gates on most IBM Quantum systems.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">N</span> <span class="o">=</span> <span class="mi">6</span>
<span class="n">qc_smart</span> <span class="o">=</span> <span class="n">QuantumCircuit</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>
<span class="n">qc_smart</span><span class="o">.</span><span class="n">h</span><span class="p">(</span><span class="n">N</span><span class="o">//</span><span class="mi">2</span><span class="p">)</span>
<span class="k">for</span> <span class="n">kk</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="o">//</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
    <span class="n">qc_smart</span><span class="o">.</span><span class="n">cx</span><span class="p">(</span><span class="n">kk</span><span class="p">,</span><span class="n">kk</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="k">for</span> <span class="n">kk</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="o">//</span><span class="mi">2</span><span class="p">,</span> <span class="n">N</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
    <span class="n">qc_smart</span><span class="o">.</span><span class="n">cx</span><span class="p">(</span><span class="n">kk</span><span class="p">,</span> <span class="n">kk</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
<span class="n">qc_smart</span><span class="o">.</span><span class="n">measure_all</span><span class="p">()</span>
<span class="n">qc_smart</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="s1">&#39;mpl&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/fe08ff92a40399a587aa5a87f0bc34819af83325082632f6193559c2cb133b05.png" src="../../_images/fe08ff92a40399a587aa5a87f0bc34819af83325082632f6193559c2cb133b05.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">best_qc</span> <span class="o">=</span> <span class="n">transpile</span><span class="p">(</span><span class="n">qc_smart</span><span class="p">,</span> <span class="n">backend</span><span class="p">,</span> <span class="n">optimization_level</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">best_qc</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="s1">&#39;mpl&#39;</span><span class="p">,</span> <span class="n">fold</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span><span class="n">idle_wires</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/ba395810b22277789909a80635fc23a3453448b68e36e73c1723299dfbf969b5.png" src="../../_images/ba395810b22277789909a80635fc23a3453448b68e36e73c1723299dfbf969b5.png" />
</div>
</div>
<p>Unlike the GHZ used throughout this tutorial notebook, the following Bernstein-Vazrani (BV) circuit cannot be written to match the topology.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">N</span> <span class="o">=</span> <span class="mi">6</span>
<span class="n">qc_bv</span> <span class="o">=</span> <span class="n">QuantumCircuit</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="n">N</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="n">qc_bv</span><span class="o">.</span><span class="n">x</span><span class="p">(</span><span class="n">N</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="n">qc_bv</span><span class="o">.</span><span class="n">h</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">))</span>
<span class="n">qc_bv</span><span class="o">.</span><span class="n">cx</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">N</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="n">N</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="n">qc_bv</span><span class="o">.</span><span class="n">barrier</span><span class="p">()</span>
<span class="n">qc_bv</span><span class="o">.</span><span class="n">h</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
<span class="n">qc_bv</span><span class="o">.</span><span class="n">measure</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
<span class="n">qc_bv</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="s1">&#39;mpl&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/fdb50e15d2f1f83e27988361bbc23c363af7c726592bfc4c467720902a1f3977.png" src="../../_images/fdb50e15d2f1f83e27988361bbc23c363af7c726592bfc4c467720902a1f3977.png" />
</div>
</div>
<p>However, because the BV circuit uses phase kickback that leaves the target qubit unentangled, the circuit is really comprised of only two qubit interactions, and could be greatly simplified if we are able to measure and reset qubits.  Fortunately IBM Quantum systems can do this, and one can rewrite this circuit as a <a class="reference external" href="https://nonhermitian.org/posts/2021/2021-10-27-dynamic_BV.html">dynamic BV circuit</a>.</p>
<p>The point we are trying to drive here is that, at this stage of quantum computing, there is great benefit in understanding what type of circuits one is running and how they can best be written to match the topology of the target system and its capabilities.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">qiskit.tools.jupyter</span>
<span class="o">%</span><span class="k">qiskit_version_table</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><h3>Version Information</h3><table><tr><th>Qiskit Software</th><th>Version</th></tr><tr><td><code>qiskit-terra</code></td><td>0.22.1</td></tr><tr><td><code>qiskit-aer</code></td><td>0.11.1</td></tr><tr><td><code>qiskit-ignis</code></td><td>0.7.1</td></tr><tr><td><code>qiskit-ibmq-provider</code></td><td>0.19.2</td></tr><tr><td><code>qiskit</code></td><td>0.39.1</td></tr><tr><td><code>qiskit-nature</code></td><td>0.4.2</td></tr><tr><td><code>qiskit-finance</code></td><td>0.3.3</td></tr><tr><td><code>qiskit-optimization</code></td><td>0.4.0</td></tr><tr><td><code>qiskit-machine-learning</code></td><td>0.4.0</td></tr><tr><th>System information</th></tr><tr><td>Python version</td><td>3.8.2</td></tr><tr><td>Python compiler</td><td>MSC v.1916 64 bit (AMD64)</td></tr><tr><td>Python build</td><td>default, Apr 14 2020 19:01:40</td></tr><tr><td>OS</td><td>Windows</td></tr><tr><td>CPUs</td><td>4</td></tr><tr><td>Memory (Gb)</td><td>7.838371276855469</td></tr><tr><td colspan='2'>Thu Nov 03 13:47:41 2022 W. Europe Standard Time</td></tr></table></div></div>
</div>
</section>
</section>

<div class="section">
   
</div>

              </article>
              

              
              <footer class="bd-footer-article">
                  <!-- Previous / next buttons -->
<div class='prev-next-area'>
  <a class='left-prev' id="prev-link" href="../quick/quick-start.html" title="previous page">
      <i class="fas fa-angle-left"></i>
      <div class="prev-next-info">
          <p class="prev-next-subtitle">previous</p>
          <p class="prev-next-title">Quick start guide</p>
      </div>
  </a>
  <a class='right-next' id="next-link" href="../dynamical_decoupling/dynamical_decoupling.html" title="next page">
  <div class="prev-next-info">
      <p class="prev-next-subtitle">next</p>
      <p class="prev-next-title">Dynamical Decoupling</p>
  </div>
  <i class="fas fa-angle-right"></i>
  </a>
</div>
              </footer>
              
          </div>
          
      </div>
    </div>

  
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/pydata-sphinx-theme.js?digest=92025949c220c2e29695"></script>

<footer class="bd-footer">
<div>
<p xmlns:cc="http://creativecommons.org/ns#" xmlns:dct="http://purl.org/dc/terms/">
        Content on
        <a property="dct:title" rel="cc:attributionURL" href="http://quantum-enablement.org">this website</a> 
        by <span property="cc:attributionName">IBM</span> is licensed under 
        <a href="http://creativecommons.org/licenses/by-nc/4.0/?ref=chooser-v1" target="_blank" rel="license noopener noreferrer" style="display:inline-block;">
                Attribution-NonCommercial 4.0 International<img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/cc.svg?ref=chooser-v1">
                <img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/by.svg?ref=chooser-v1">
                <img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/nc.svg?ref=chooser-v1">
        </a>
</p> 
</div>
</footer>

  </body>
</html>