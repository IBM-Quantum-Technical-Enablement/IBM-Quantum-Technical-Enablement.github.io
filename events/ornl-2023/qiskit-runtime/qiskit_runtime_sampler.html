

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Background &#8212; Enabing Technologies  documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../../../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/jupyter-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/thebelab.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/sphinx_highlight.js"></script>
    <script src="../../../_static/thebelab-helper.js"></script>
    <script src="../../../_static/design-tabs.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=UA-16824831-8"></script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'UA-16824831-8');
            </script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'events/ornl-2023/qiskit-runtime/qiskit_runtime_sampler';</script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />

  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>

<link
  rel="alternate"
  type="application/atom+xml"
  href="../../../explore/atom.xml"
  title="Quantum Explorations"
/>



  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the site..."
         aria-label="Search the site..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  <div class="navbar-header-items__start">
    
      <div class="navbar-item">
  

<a class="navbar-brand logo" href="../../../index.html">
  
  
  
  
    
    
      
    
    
    <img src="../../../_static/logo.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../../../_static/dark_logo.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
    
  </div>
  
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../how-to/howto.html">
                        How to guides
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../explore.html">
                        Explorations
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../hardware/hardware.html">
                        IBM Hardware
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../events.html">
                        Events
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../members.html">
                        Contributors
                      </a>
                    </li>
                
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          
<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
        </div>
      
      
        <div class="navbar-item">
<form class="bd-search d-flex align-items-center"
      action="../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the site..."
         aria-label="Search the site..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
      
        <div class="navbar-item">
<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/IBM-Quantum-Technical-Enablement" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">
<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
    </div>
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar hide-on-wide">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../how-to/howto.html">
                        How to guides
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../explore.html">
                        Explorations
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../hardware/hardware.html">
                        IBM Hardware
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../events.html">
                        Events
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../../members.html">
                        Contributors
                      </a>
                    </li>
                
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">
<form class="bd-search d-flex align-items-center"
      action="../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the site..."
         aria-label="Search the site..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
        
          <div class="navbar-item">
<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/IBM-Quantum-Technical-Enablement" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumbs">
  <ul class="bd-breadcrumbs" role="navigation" aria-label="Breadcrumb">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    <li class="breadcrumb-item active" aria-current="page">Background</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
<section class="tex2jax_ignore mathjax_ignore" id="background">
<h1>Background<a class="headerlink" href="#background" title="Permalink to this heading">#</a></h1>
<p>There are several methods by which one can access IBM Quantum systems.  Each of these routines can be thought of as a software interface to quantum hardware.</p>
<section id="backend-run">
<h2><code class="docutils literal notranslate"><span class="pre">backend.run()</span></code><a class="headerlink" href="#backend-run" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>The original method of access to IBM Quantum systems</p></li>
<li><p>Access via <code class="docutils literal notranslate"><span class="pre">qiskit-ibm-provider</span></code> package</p></li>
<li><p>Can be viewed as an open-source, vendor agnostic device driver</p></li>
<li><p>Provides direct access to sampling data from device with no pre- or post-processing</p></li>
<li><p>Ideal for users wanting to characterize / benchmark quantum systems, or looking to develop software such as error mitigation techniques</p></li>
<li><p>Requires users to possess comprehensive knowledge of hardware details to be successful</p></li>
</ul>
</section>
<section id="qiskit-runtime">
<h2>Qiskit Runtime<a class="headerlink" href="#qiskit-runtime" title="Permalink to this heading">#</a></h2>
<p>As quantum computing matures, and users further detached from device physics gain interest, it is important to abstract as much of the knowledge required for using <code class="docutils literal notranslate"><span class="pre">backend.run()</span></code> away from users, so that focus can be on building applications and algorithms.</p>
<p>The <strong>Qiskit Runtime</strong> is a quantum device driver designed to abstract many details away from users, and give a high-fidelity managed user experience to those who prefer a more automated execution process.  Specifically, IBM Quantum knows many of the knobs that, to first-order, give best results and can be automatically set for users.  For these features, the options and code can be pushed into a cloud execution environment.</p>
<p>The Qiskit Runtime provides:</p>
<ul class="simple">
<li><p>A simple interface that abstracts away hardware details, and removes the need for boilerplate code</p></li>
<li><p>Accessed through the <code class="docutils literal notranslate"><span class="pre">qiskit-ibm-runtime</span></code> package</p></li>
<li><p>By default, does a variety of pre- and post-processing steps (including error suppression and mitigation) that aim to improve returned results</p></li>
<li><p>Can be viewed as a closed-source, vendor specific device driver</p></li>
<li><p>Ideal for users at the level of algorithms and applications</p></li>
<li><p>Not as flexible as <code class="docutils literal notranslate"><span class="pre">backend.run()</span></code></p></li>
</ul>
<p>The Runtime consists of a collection of “primitives”; common quantum computational routines that are executed in a dockerized cloud environment.  The two primitives available to date are:</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Primitive</p></th>
<th class="head"><p>What it does</p></th>
<th class="head"><p>Inputs</p></th>
<th class="head"><p>Outputs</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>Sampler</strong></p></td>
<td><p>Samples circuit output distributions, possibly with error mitigation</p></td>
<td><p>Quantum circuits</p></td>
<td><p>Quasi-probability distributions</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Estimator</strong></p></td>
<td><p>Computes expectation values for operators and states defined by circuits, possibly with error mitigation</p></td>
<td><p>Quantum circuits and operators</p></td>
<td><p>A list of expectation values (and error estimates)</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="imports">
<h1>Imports<a class="headerlink" href="#imports" title="Permalink to this heading">#</a></h1>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">qiskit</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">qiskit.quantum_info</span> <span class="kn">import</span> <span class="n">hellinger_fidelity</span>

<span class="c1"># Operators from Qiskit</span>
<span class="kn">from</span> <span class="nn">qiskit.quantum_info</span> <span class="kn">import</span> <span class="n">SparsePauliOp</span>

<span class="c1"># Runtime imports</span>
<span class="kn">from</span> <span class="nn">qiskit_ibm_runtime</span> <span class="kn">import</span> <span class="n">QiskitRuntimeService</span><span class="p">,</span> <span class="n">Sampler</span><span class="p">,</span> <span class="n">Estimator</span><span class="p">,</span> <span class="n">Session</span><span class="p">,</span> <span class="n">Options</span>


<span class="c1"># Plotting tools</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">matplotlib_inline</span>
<span class="n">matplotlib_inline</span><span class="o">.</span><span class="n">backend_inline</span><span class="o">.</span><span class="n">set_matplotlib_formats</span><span class="p">(</span><span class="s1">&#39;retina&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="setup-test-circuit">
<h1>Setup: Test circuit<a class="headerlink" href="#setup-test-circuit" title="Permalink to this heading">#</a></h1>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">cntrl_hadamard_ladder</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="n">measurements</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="n">qc</span> <span class="o">=</span> <span class="n">QuantumCircuit</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>

    <span class="n">qc</span><span class="o">.</span><span class="n">x</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">))</span>
    <span class="n">qc</span><span class="o">.</span><span class="n">h</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">))</span>

    <span class="k">for</span> <span class="n">kk</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">qc</span><span class="o">.</span><span class="n">ch</span><span class="p">(</span><span class="n">kk</span><span class="p">,</span> <span class="n">kk</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">kk</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span> <span class="n">N</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
        <span class="n">qc</span><span class="o">.</span><span class="n">ch</span><span class="p">(</span><span class="n">kk</span><span class="p">,</span> <span class="n">kk</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">measurements</span><span class="p">:</span>
        <span class="n">qc</span><span class="o">.</span><span class="n">measure_all</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">qc</span>

<span class="n">N</span> <span class="o">=</span> <span class="mi">6</span>
<span class="n">qc</span> <span class="o">=</span> <span class="n">cntrl_hadamard_ladder</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="n">measurements</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">qc</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="s1">&#39;mpl&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../../_images/b9a83056305c2d03c542e27f2cf6b8e91f7e10fd1029714d4d843f7885a9dc32.png" src="../../../_images/b9a83056305c2d03c542e27f2cf6b8e91f7e10fd1029714d4d843f7885a9dc32.png" />
</div>
</div>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="qiskit-runtime-sampler-primitive">
<h1>Qiskit Runtime <em>Sampler</em> Primitive<a class="headerlink" href="#qiskit-runtime-sampler-primitive" title="Permalink to this heading">#</a></h1>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">instance</span> <span class="o">=</span> <span class="s2">&quot;system-request/7-14-23-access/main&quot;</span>
<span class="n">service</span> <span class="o">=</span> <span class="n">QiskitRuntimeService</span><span class="p">(</span><span class="n">instance</span><span class="o">=</span><span class="n">instance</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">service</span><span class="o">.</span><span class="n">backends</span><span class="p">();</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">service</span><span class="o">.</span><span class="n">backends</span><span class="p">(</span><span class="n">simulator</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&lt;IBMBackend(&#39;ibmq_qasm_simulator&#39;)&gt;,
 &lt;IBMBackend(&#39;simulator_stabilizer&#39;)&gt;,
 &lt;IBMBackend(&#39;simulator_extended_stabilizer&#39;)&gt;,
 &lt;IBMBackend(&#39;simulator_mps&#39;)&gt;,
 &lt;IBMBackend(&#39;simulator_statevector&#39;)&gt;]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">service</span><span class="o">.</span><span class="n">jobs</span><span class="p">();</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">service</span><span class="o">.</span><span class="n">jobs</span><span class="p">(</span><span class="n">backend_name</span><span class="o">=</span><span class="s2">&quot;ibmq_qasm_simulator&quot;</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">backend</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">get_backend</span><span class="p">(</span><span class="s2">&quot;ibmq_qasm_simulator&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sampler</span> <span class="o">=</span> <span class="n">Sampler</span><span class="p">(</span><span class="n">backend</span><span class="o">=</span><span class="n">backend</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">job</span> <span class="o">=</span> <span class="n">sampler</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">qc</span><span class="p">)</span>
<span class="n">job</span><span class="o">.</span><span class="n">job_id</span><span class="p">();</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">res</span> <span class="o">=</span> <span class="n">job</span><span class="o">.</span><span class="n">result</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">res</span><span class="o">.</span><span class="n">quasi_dists</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[{1: 0.01625,
  35: 0.029,
  49: 0.0325,
  32: 0.01475,
  33: 0.01175,
  63: 0.50025,
  55: 0.1235,
  51: 0.066,
  48: 0.0345,
  3: 0.03175,
  7: 0.06425,
  0: 0.0185,
  39: 0.057}]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">res</span><span class="o">.</span><span class="n">metadata</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[{&#39;shots&#39;: 4000}]
</pre></div>
</div>
</div>
</div>
<section id="running-inside-a-session">
<h2>Running inside a Session<a class="headerlink" href="#running-inside-a-session" title="Permalink to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">run_with_sampler_in_session</span><span class="p">(</span><span class="n">circuits</span><span class="p">,</span> <span class="n">service</span><span class="p">,</span> <span class="n">sampler_name</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Wrapper for running circuits with runtime Sampler inside a Session.</span>
<span class="sd">    We will be re-using this construct a number of time. Therefore, it is warpped</span>
<span class="sd">    insided a function for re-usability.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="n">Session</span><span class="p">(</span><span class="n">service</span><span class="o">=</span><span class="n">service</span><span class="p">,</span> <span class="n">backend</span><span class="o">=</span><span class="n">sampler_name</span><span class="p">)</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
        <span class="n">sampler</span> <span class="o">=</span> <span class="n">Sampler</span><span class="p">(</span><span class="n">session</span><span class="o">=</span><span class="n">session</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="n">options</span><span class="p">)</span>
        <span class="n">job</span> <span class="o">=</span> <span class="n">sampler</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">circuits</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">job</span><span class="o">.</span><span class="n">result</span><span class="p">()</span>

    <span class="n">session</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    
    <span class="k">return</span> <span class="n">result</span>
</pre></div>
</div>
</div>
</div>
<div class="alert alert-warning">
   <div>
       <big><b>Note</b></big>
   </div>
   <br>
    It is advised to close a session with explicit `session.close()` command after "all" jobs have finished.
</div><p><img alt="independent.png" src="../../../_images/independent1.png" /></p>
<div class="alert alert-danger">
   <div>
       <big><b>Danger</b></big>
   </div>
   <br>
    If you close a session with unfinished jobs in it, then those jobs will be canceled!
</div><div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sampler_name</span> <span class="o">=</span> <span class="s2">&quot;ibmq_qasm_simulator&quot;</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">run_with_sampler_in_session</span><span class="p">(</span><span class="n">circuits</span><span class="o">=</span><span class="n">qc</span><span class="p">,</span> <span class="n">service</span><span class="o">=</span><span class="n">service</span><span class="p">,</span> <span class="n">sampler_name</span><span class="o">=</span><span class="n">sampler_name</span><span class="p">)</span>
<span class="n">ideal_dists</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">quasi_dists</span>
<span class="n">ideal_dists</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{33: 0.01425,
 49: 0.02975,
 32: 0.01975,
 35: 0.03375,
 1: 0.02,
 63: 0.49725,
 55: 0.126,
 39: 0.064,
 3: 0.03175,
 0: 0.0135,
 7: 0.0625,
 51: 0.06075,
 48: 0.02675}
</pre></div>
</div>
</div>
</div>
<p>Unlike the usual <code class="docutils literal notranslate"><span class="pre">Counts</span></code> returned via <code class="docutils literal notranslate"><span class="pre">backend.run()</span></code>, the quasi-distribution states are given as integers rather than bit-strings, and the values are not discrete counts. This is because, as the number of qubits grows, the size of the bit-string keys grows much larger than the equivilent integer representation.</p>
<p>Alternatively, one can work in bit-strings:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ideal_dists</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">binary_probabilities</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;100001&#39;: 0.01425,
 &#39;110001&#39;: 0.02975,
 &#39;100000&#39;: 0.01975,
 &#39;100011&#39;: 0.03375,
 &#39;000001&#39;: 0.02,
 &#39;111111&#39;: 0.49725,
 &#39;110111&#39;: 0.126,
 &#39;100111&#39;: 0.064,
 &#39;000011&#39;: 0.03175,
 &#39;000000&#39;: 0.0135,
 &#39;000111&#39;: 0.0625,
 &#39;110011&#39;: 0.06075,
 &#39;110000&#39;: 0.02675}
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">res</span><span class="o">.</span><span class="n">metadata</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[{&#39;shots&#39;: 4000}]
</pre></div>
</div>
</div>
</div>
</section>
<section id="configuring-options">
<h2>Configuring Options<a class="headerlink" href="#configuring-options" title="Permalink to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">options</span> <span class="o">=</span> <span class="n">Options</span><span class="p">()</span>
<span class="kn">import</span> <span class="nn">pprint</span>
<span class="n">pprint</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Options(optimization_level=None,
        resilience_level=None,
        max_execution_time=None,
        transpilation=TranspilationOptions(skip_transpilation=False,
                                           initial_layout=None,
                                           layout_method=None,
                                           routing_method=None,
                                           approximation_degree=None),
        resilience=ResilienceOptions(noise_amplifier=&#39;TwoQubitAmplifier&#39;,
                                     noise_factors=(1, 3, 5),
                                     extrapolator=&#39;LinearExtrapolator&#39;),
        execution=ExecutionOptions(shots=4000, init_qubits=True),
        environment=EnvironmentOptions(log_level=&#39;WARNING&#39;,
                                       callback=None,
                                       job_tags=[]),
        simulator=SimulatorOptions(noise_model=None,
                                   seed_simulator=None,
                                   coupling_map=None,
                                   basis_gates=None))
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">options</span><span class="o">.</span><span class="n">optimization_level</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">options</span><span class="o">.</span><span class="n">resilience_level</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">options</span><span class="o">.</span><span class="n">execution</span><span class="o">.</span><span class="n">shots</span> <span class="o">=</span> <span class="mi">10000</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">res</span> <span class="o">=</span> <span class="n">run_with_sampler_in_session</span><span class="p">(</span>
    <span class="n">circuits</span><span class="o">=</span><span class="n">qc</span><span class="p">,</span>
    <span class="n">service</span><span class="o">=</span><span class="n">service</span><span class="p">,</span>
    <span class="n">sampler_name</span><span class="o">=</span><span class="n">sampler_name</span><span class="p">,</span>
    <span class="n">options</span><span class="o">=</span><span class="n">options</span>
<span class="p">)</span>
<span class="n">ideal_dists</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">quasi_dists</span>
<span class="n">ideal_dists</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{32: 0.0142,
 33: 0.0141,
 35: 0.0309,
 1: 0.0157,
 63: 0.5044,
 48: 0.0345,
 51: 0.0624,
 49: 0.0314,
 55: 0.1224,
 0: 0.0168,
 39: 0.0591,
 3: 0.0316,
 7: 0.0625}
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">res</span><span class="o">.</span><span class="n">metadata</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[{&#39;shots&#39;: 10000}]
</pre></div>
</div>
</div>
</div>
</section>
<section id="running-on-real-backend-with-sampler">
<h2>Running on real backend with Sampler<a class="headerlink" href="#running-on-real-backend-with-sampler" title="Permalink to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sampler_name</span> <span class="o">=</span> <span class="s2">&quot;ibm_peekskill&quot;</span>
<span class="n">res_hw</span> <span class="o">=</span> <span class="n">run_with_sampler_in_session</span><span class="p">(</span>
    <span class="n">circuits</span><span class="o">=</span><span class="n">qc</span><span class="p">,</span>
    <span class="n">service</span><span class="o">=</span><span class="n">service</span><span class="p">,</span>
    <span class="n">sampler_name</span><span class="o">=</span><span class="n">sampler_name</span><span class="p">,</span>
    <span class="n">options</span><span class="o">=</span><span class="n">options</span>
<span class="p">)</span>
<span class="n">hw_dists</span> <span class="o">=</span> <span class="n">res_hw</span><span class="o">.</span><span class="n">quasi_dists</span>
<span class="n">fidelity</span> <span class="o">=</span> <span class="n">hellinger_fidelity</span><span class="p">(</span><span class="n">ideal_dists</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">hw_dists</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">fidelity</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.717647770744919
</pre></div>
</div>
</div>
</div>
<div class="alert alert-warning">
   <div>
       <big><b>Things to be careful of</b></big>
   </div>
   <br>
    With the generalization to quasi-probability distributions some things that work for canonical probability distributions do not work when negative values are encountered.  One such example is computing the fidelity between two distributions.  For example, if the quasi-probability distribution has negative values then the fidelity calculation will fail due to the use of sqrts.
</div></section>
<section id="noisy-simulation-with-runtime-sampler">
<h2>Noisy Simulation with Runtime Sampler<a class="headerlink" href="#noisy-simulation-with-runtime-sampler" title="Permalink to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># fetch a noise model from backend</span>
<span class="kn">from</span> <span class="nn">qiskit_aer.noise</span> <span class="kn">import</span> <span class="n">NoiseModel</span>

<span class="n">backend</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">get_backend</span><span class="p">(</span><span class="s2">&quot;ibm_peekskill&quot;</span><span class="p">)</span>
<span class="n">noise_model</span> <span class="o">=</span> <span class="n">NoiseModel</span><span class="o">.</span><span class="n">from_backend</span><span class="p">(</span><span class="n">backend</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">options</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">noise_model</span> <span class="o">=</span> <span class="n">noise_model</span>
<span class="n">options</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">basis_gates</span> <span class="o">=</span> <span class="n">backend</span><span class="o">.</span><span class="n">operation_names</span>
<span class="n">options</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">coupling_map</span> <span class="o">=</span> <span class="n">backend</span><span class="o">.</span><span class="n">coupling_map</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sampler_name</span> <span class="o">=</span> <span class="s2">&quot;ibmq_qasm_simulator&quot;</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">res_noisy</span> <span class="o">=</span> <span class="n">run_with_sampler_in_session</span><span class="p">(</span>
    <span class="n">circuits</span><span class="o">=</span><span class="n">qc</span><span class="p">,</span>
    <span class="n">service</span><span class="o">=</span><span class="n">service</span><span class="p">,</span>
    <span class="n">sampler_name</span><span class="o">=</span><span class="n">sampler_name</span><span class="p">,</span>
    <span class="n">options</span><span class="o">=</span><span class="n">options</span>
<span class="p">)</span>
<span class="n">noisy_dists</span> <span class="o">=</span> <span class="n">res_noisy</span><span class="o">.</span><span class="n">quasi_dists</span>
<span class="n">fidelity</span> <span class="o">=</span> <span class="n">hellinger_fidelity</span><span class="p">(</span><span class="n">ideal_dists</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">noisy_dists</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">fidelity</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.8068802747212296
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">options</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">set_backend</span><span class="p">(</span><span class="n">backend</span><span class="p">)</span> <span class="c1"># avaialble from qiskit-ibm-runtime 0.11.2</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">res_noisy</span> <span class="o">=</span> <span class="n">run_with_sampler_in_session</span><span class="p">(</span>
    <span class="n">circuits</span><span class="o">=</span><span class="n">qc</span><span class="p">,</span>
    <span class="n">service</span><span class="o">=</span><span class="n">service</span><span class="p">,</span>
    <span class="n">sampler_name</span><span class="o">=</span><span class="n">sampler_name</span><span class="p">,</span>
    <span class="n">options</span><span class="o">=</span><span class="n">options</span>
<span class="p">)</span>
<span class="n">noisy_dists</span> <span class="o">=</span> <span class="n">res_noisy</span><span class="o">.</span><span class="n">quasi_dists</span>
<span class="n">fidelity</span> <span class="o">=</span> <span class="n">hellinger_fidelity</span><span class="p">(</span><span class="n">ideal_dists</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">noisy_dists</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">fidelity</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.8055267666194886
</pre></div>
</div>
</div>
</div>
</section>
<section id="error-suppression-and-mitigation-with-sampler">
<h2>Error Suppression and mitigation with Sampler<a class="headerlink" href="#error-suppression-and-mitigation-with-sampler" title="Permalink to this heading">#</a></h2>
<p>Playing with <code class="docutils literal notranslate"><span class="pre">optimization_level</span></code> and <code class="docutils literal notranslate"><span class="pre">resilience_level</span></code> in <code class="docutils literal notranslate"><span class="pre">Options()</span></code>, we can activate different error suppression and mitigation methods in runtime.</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Optimization Level</p></th>
<th class="head"><p>Sampler and Estimator</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>Level 0</strong></p></td>
<td><p>No optimization and  no error suppression</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Level 1</strong></p></td>
<td><p>Light optimization and Dynamical Decoupling</p></td>
</tr>
<tr class="row-even"><td><p><strong>Level 2</strong></p></td>
<td><p>Medium optimization and Dynamical Decoupling</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Level 3</strong></p></td>
<td><p>Heavy optimization and Dynamical Decoupling</p></td>
</tr>
</tbody>
</table>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Resilience Levels</p></th>
<th class="head"><p>Sampler</p></th>
<th class="head"><p>Estimator</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>Level 0</strong></p></td>
<td><p>No mitigation</p></td>
<td><p>No mitigation</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Level 1</strong> (default)</p></td>
<td><p>M3 readout correction</p></td>
<td><p>TREX readout correction</p></td>
</tr>
<tr class="row-even"><td><p><strong>Level 2</strong></p></td>
<td><p>No mitigation</p></td>
<td><p>ZNE (no readout correction)</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Level 3</strong></p></td>
<td><p>No mitigation</p></td>
<td><p>PEC</p></td>
</tr>
</tbody>
</table>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">options</span><span class="o">.</span><span class="n">optimizationa_level</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">options</span><span class="o">.</span><span class="n">resilience_level</span> <span class="o">=</span> <span class="mi">1</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">res_mitigated</span> <span class="o">=</span> <span class="n">run_with_sampler_in_session</span><span class="p">(</span>
    <span class="n">circuits</span><span class="o">=</span><span class="n">qc</span><span class="p">,</span>
    <span class="n">service</span><span class="o">=</span><span class="n">service</span><span class="p">,</span>
    <span class="n">sampler_name</span><span class="o">=</span><span class="n">sampler_name</span><span class="p">,</span>
    <span class="n">options</span><span class="o">=</span><span class="n">options</span>
<span class="p">)</span>
<span class="n">mitigated_dists</span> <span class="o">=</span> <span class="n">res_mitigated</span><span class="o">.</span><span class="n">quasi_dists</span>
<span class="n">fidelity</span> <span class="o">=</span> <span class="n">hellinger_fidelity</span><span class="p">(</span><span class="n">ideal_dists</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">mitigated_dists</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">fidelity</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.8792062754351838
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;numpy version </span><span class="si">{</span><span class="n">numpy</span><span class="o">.</span><span class="n">__version__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="kn">import</span> <span class="nn">qiskit_ibm_runtime</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;qiskit runtime version </span><span class="si">{</span><span class="n">qiskit_ibm_runtime</span><span class="o">.</span><span class="n">version</span><span class="o">.</span><span class="n">get_version_info</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="kn">import</span> <span class="nn">qiskit.tools.jupyter</span>
<span class="o">%</span><span class="k">qiskit_version_table</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>numpy version 1.23.5
qiskit runtime version 0.11.2
</pre></div>
</div>
<div class="output text_html"><h3>Version Information</h3><table><tr><th>Qiskit Software</th><th>Version</th></tr><tr><td><code>qiskit-terra</code></td><td>0.24.1</td></tr><tr><td><code>qiskit-aer</code></td><td>0.12.0</td></tr><tr><td><code>qiskit-ibmq-provider</code></td><td>0.20.2</td></tr><tr><td><code>qiskit</code></td><td>0.43.1</td></tr><tr><th>System information</th></tr><tr><td>Python version</td><td>3.10.11</td></tr><tr><td>Python compiler</td><td>MSC v.1934 64 bit (AMD64)</td></tr><tr><td>Python build</td><td>main, May 10 2023 18:51:25</td></tr><tr><td>OS</td><td>Windows</td></tr><tr><td>CPUs</td><td>8</td></tr><tr><td>Memory (Gb)</td><td>63.71001434326172</td></tr><tr><td colspan='2'>Sat Jul 15 20:11:48 2023 Eastern Daylight Time</td></tr></table></div></div>
</div>
</section>
</section>

<div class="section ablog__blog_comments">
  
  
</div>

                </article>
              
              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Background</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#backend-run"><code class="docutils literal notranslate"><span class="pre">backend.run()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#qiskit-runtime">Qiskit Runtime</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#imports">Imports</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#setup-test-circuit">Setup: Test circuit</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#qiskit-runtime-sampler-primitive">Qiskit Runtime <em>Sampler</em> Primitive</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#running-inside-a-session">Running inside a Session</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#configuring-options">Configuring Options</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#running-on-real-backend-with-sampler">Running on real backend with Sampler</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#noisy-simulation-with-runtime-sampler">Noisy Simulation with Runtime Sampler</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#error-suppression-and-mitigation-with-sampler">Error Suppression and mitigation with Sampler</a></li>
</ul>
</li>
</ul>

  </nav></div>

  <div class="sidebar-secondary-item">
  <div class="tocsection sourcelink">
    <a href="../../../_sources/events/ornl-2023/qiskit-runtime/qiskit_runtime_sampler.ipynb.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

<footer class="bd-footer">
<div>
<p xmlns:cc="http://creativecommons.org/ns#" xmlns:dct="http://purl.org/dc/terms/">
        Content on
        <a property="dct:title" rel="cc:attributionURL" href="http://quantum-enablement.org">this website</a> 
        by <span property="cc:attributionName">IBM</span> is licensed under 
        <a href="http://creativecommons.org/licenses/by-nc/4.0/?ref=chooser-v1" target="_blank" rel="license noopener noreferrer" style="display:inline-block;">
                Attribution-NonCommercial 4.0 International<img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/cc.svg?ref=chooser-v1">
                <img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/by.svg?ref=chooser-v1">
                <img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/nc.svg?ref=chooser-v1">
        </a>
</p> 
</div>
</footer>

  </body>
</html>