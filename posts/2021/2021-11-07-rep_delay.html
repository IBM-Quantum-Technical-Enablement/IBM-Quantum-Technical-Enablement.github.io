

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Improving state prep errors on IBM Quantum systems &#8212; Enabing Technologies  documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/jupyter-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/thebelab.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/thebelab-helper.js"></script>
    <script src="../../_static/design-tabs.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=UA-16824831-8"></script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'UA-16824831-8');
            </script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'posts/2021/2021-11-07-rep_delay';</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />

  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>

<link
  rel="alternate"
  type="application/atom+xml"
  href="../../explore/atom.xml"
  title="Quantum Explorations"
/>



  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the site..."
         aria-label="Search the site..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  <div class="navbar-header-items__start">
    
      <div class="navbar-item">
  

<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
    
    
      
    
    
    <img src="../../_static/logo.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../../_static/dark_logo.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
    
  </div>
  
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../how-to/howto.html">
                        How to guides
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../explore.html">
                        Explorations
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../hardware/hardware.html">
                        IBM Hardware
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../events.html">
                        Events
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../members.html">
                        Contributors
                      </a>
                    </li>
                
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          
<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
        </div>
      
      
        <div class="navbar-item">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the site..."
         aria-label="Search the site..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
      
        <div class="navbar-item">
<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/IBM-Quantum-Technical-Enablement" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">
<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
    </div>
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../how-to/howto.html">
                        How to guides
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../explore.html">
                        Explorations
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../hardware/hardware.html">
                        IBM Hardware
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../events.html">
                        Events
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../../members.html">
                        Contributors
                      </a>
                    </li>
                
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the site..."
         aria-label="Search the site..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
        
          <div class="navbar-item">
<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/IBM-Quantum-Technical-Enablement" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<div class="ablog-sidebar-item ablog__postcard">


<h2>
  
  
  <i class="fa fa-calendar"></i>
  
  07 November 2021
  
</h2>
<ul>
  

<li id="ablog-sidebar-item author ablog__author">
  <span>
    
    <i class="fa-fw fa fa-user"></i>
    
    </span>
  
  
  <a href="../../explore/author/paul-nation.html">Paul Nation</a>
  
  
  
</li>




<li id="ablog-sidebar-item category ablog__category">
  <span>
    
    <i class="fa-fw fa fa-folder-open"></i>
    
    </span>
  
  
  <a href="../../explore/category/hardware.html">Hardware</a>
  
  
  
</li>


<li id="ablog-sidebar-item tags ablog__tags">
  <span>
    
    
    <i class="fa-fw fa fa-tags"></i>
    
    
    </span>
  
  
  <a href="../../explore/tag/spam.html">SPAM</a>
  
  
  
  
  
  <a href="../../explore/tag/reset.html">Reset</a>
  
  
  
  
  
  <a href="../../explore/tag/dynamic.html">Dynamic</a>
  
  
  
</li>


</ul>
</div>
</div>
        <div class="sidebar-primary-item"><div class="dropdown-buttons">
    <!-- ipynb file if we had a myst markdown file -->
    
    <!-- Download raw file -->
    <a class="dropdown-buttons" href="../../_sources/posts/2021/2021-11-07-rep_delay.ipynb.txt"><button type="button"
            class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
            data-placement="left">.ipynb</button></a>
</div></div>
        <div class="sidebar-primary-item">
<div class="ablog-sidebar-item ablog__recentposts">
<h3>
  <a href="../../explore.html">Recent Posts</a>
</h3>
<ul>
  
  
  <li>
    <a href="../2023/2023-05-24-Calibration_methods.html">
      24 May - Understanding IBM Quantum hardware calibration schemes
    </a>
  </li>
  
  <li>
    <a href="../2023/2023-05-12-properties_from_api.html">
      12 May - Accessing device properties without an IBM Quantum account
    </a>
  </li>
  
  <li>
    <a href="../2023/2023-02-02-pauli_twirling.html">
      02 February - Generating Pauli-twirled circuits in Qiskit
    </a>
  </li>
  
  <li>
    <a href="../2023/2023-01-28-directed_cmap.html">
      28 January - How to make your backend a directed backend
    </a>
  </li>
  
  <li>
    <a href="../2022/2022-11-07-challenge.html">
      07 November - Quantum Practitioners Forum 2022: CHSH Distance Challenge
    </a>
  </li>
  
</ul>
</div>
</div>
        <div class="sidebar-primary-item">
<div class="ablog-sidebar-item ablog__archive">
<h3>
  <a href="../../explore/archive.html">Archives</a>
</h3>
<ul>
  
  
  <li>
    <a href="../../explore/2023.html">2023 (4)</a>
  </li>
  
  
  
  <li>
    <a href="../../explore/2022.html">2022 (4)</a>
  </li>
  
  
  
  <li>
    <a href="../../explore/2021.html">2021 (5)</a>
  </li>
  
  
</ul>
</div>
</div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumbs">
  <ul class="bd-breadcrumbs" role="navigation" aria-label="Breadcrumb">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    <li class="breadcrumb-item active" aria-current="page">Improving state prep errors on IBM Quantum systems</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
<section class="tex2jax_ignore mathjax_ignore" id="improving-state-prep-errors-on-ibm-quantum-systems">
<h1>Improving state prep errors on IBM Quantum systems<a class="headerlink" href="#improving-state-prep-errors-on-ibm-quantum-systems" title="Permalink to this heading">#</a></h1>
<p>It is often taken for granted that qubits are initialized to zero when executing quantum circuits on hardware.  However, errors in the reset process mean that this initialization is not perfect leading to state preparation errors.  Here we will look at state prep errors and how to improve them on IBM Quantum systems.</p>
<p>Here we will use two lesser known configuration variables available on IBM Quantum systems to do so.  First is <code class="docutils literal notranslate"><span class="pre">rep_delay</span></code>.  This is the delay time before the next circuit is executed.  Each backend has a different <code class="docutils literal notranslate"><span class="pre">default_rep_delay</span></code> (although as of the time of writing many are <span class="math notranslate nohighlight">\(250~\mu \rm s\)</span> or lower) and support tuning this parameter from <span class="math notranslate nohighlight">\(0\)</span> up to <span class="math notranslate nohighlight">\(500~\mu \rm s\)</span>.  Why in the world would I want to vary this parameter?  Well if I set <code class="docutils literal notranslate"><span class="pre">rep_delay=0</span></code> then I can get much faster throughput as the default delay is nominally longer than the <span class="math notranslate nohighlight">\(T_{1}\)</span> time of the system.  However when doing so you are trusting the implicit reset (called “unconditional reset”) to do its job and reset the qubits to their ground state with high-fidelity.  Failure to do so would lead to state-prep errors that propagate through the circuit.  This is why the delay is usually longer than <span class="math notranslate nohighlight">\(T_{1}\)</span>; let the enviornment help your reset fidelity.  Second is <code class="docutils literal notranslate"><span class="pre">init_qubits</span></code> that tells the hardware to not perform an unconditional reset.  As no reset at all would quickly lead to junk, this setting needs to be done in concert with <code class="docutils literal notranslate"><span class="pre">reset</span></code> instructions being added to the beginning of your circuits.  Perhaps this is better, or maybe a single reset at the beginning and the uncondtional reset.  Lets find out.</p>
<section id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this heading">#</a></h2>
<p>It is possible to vary the delay time between circuits using <code class="docutils literal notranslate"><span class="pre">rep_delay</span></code> and to turn off the implict reset done on IBM Quantum systems using <code class="docutils literal notranslate"><span class="pre">init_qubits=False</span></code>.  In the latter case, qubit initialization needs to be done using one or more <code class="docutils literal notranslate"><span class="pre">reset</span></code> instructions.  By looking a SPAM errors as we vary <code class="docutils literal notranslate"><span class="pre">rep_delay</span></code> we can see when state prep errors being to get worse.  This is quite apparent on some systems but not others.</p>
<p>To reduce state prep errors one can try increasing the <code class="docutils literal notranslate"><span class="pre">rep_delay</span></code>.  Occasionally this is needed, and going up to <span class="math notranslate nohighlight">\(~400~\mu \rm s\)</span> is not unheard of to try and get maximum fidelity results.  In addition, or alternatively, it is in general beneficial to add a single <code class="docutils literal notranslate"><span class="pre">reset</span></code> to the beginning of a circuit (after a barrier since Qiskit will remove it otherwise).  On some systems we can use multiple resets in combination with <code class="docutils literal notranslate"><span class="pre">init_qubits=False</span></code> to get better error rates and simultaneously allow for increasing throughput through smaller (possibly zero) <code class="docutils literal notranslate"><span class="pre">rep_delay</span></code>.</p>
<p>These features give users yet another knob to try to maximize the fidelty of their circuits, but require a fair bit of exploration and experimentation in order to get it right.}</p>
</section>
<section id="average-spam-error-rate-per-qubit">
<h2>Average SPAM error rate per qubit<a class="headerlink" href="#average-spam-error-rate-per-qubit" title="Permalink to this heading">#</a></h2>
<p>To understand what effect the above mentioned variables have on the performance of our system we must first find a way to compute state preperation and measurement (SPAM) errors.  To do so we will assume that we want to look at the error rate for prepping and measuring a state in the computational basis.  Here we will use the all-zeros and all-ones states where each qubit undergoes the same operations.  We can ask ourselves that, given that we know the target state we want to prep, what is the average Hamming distance of our samples from the target bit string.  In formula this reads:</p>
<div class="math notranslate nohighlight">
\[
\bar{H} = \sum_{k=1}^{N_{Q}} k \left({N_{Q} \atop {k}}\right) p^{k}(1-p)^{N_{Q}-k}
\]</div>
<p>where <span class="math notranslate nohighlight">\(\bar{H}\)</span> is the average Hamming distance from our data, <span class="math notranslate nohighlight">\(N_{Q}\)</span> is the number of qubits, and <span class="math notranslate nohighlight">\(p\)</span> is the average error per qubit that we seek.</p>
<p>Solving for <span class="math notranslate nohighlight">\(p\)</span> involves solving for the roots of the above polynomial such that <span class="math notranslate nohighlight">\(p \in[0,1]\)</span>.  Although it is possible to have multiple roots in this domain, if we consider the smallest root to be the physical one then it turns out that the solution <span class="math notranslate nohighlight">\(p\)</span> we want can be defined in terms of the <em>Hamming fraction</em>:</p>
<div class="math notranslate nohighlight">
\[
p = H_{\rm frac} \equiv \frac{\bar{H}}{N_{Q}}
\]</div>
<p>Thus it is quite easy to get the average error <span class="math notranslate nohighlight">\(p\)</span> we are looking for directly by computing the average Hamming distance our data is away from the target bit string.</p>
</section>
<section id="frontmatter">
<h2>Frontmatter<a class="headerlink" href="#frontmatter" title="Permalink to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">qiskit</span> <span class="kn">import</span> <span class="o">*</span>

<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="n">sns</span><span class="o">.</span><span class="n">set_style</span><span class="p">(</span><span class="s1">&#39;darkgrid&#39;</span><span class="p">)</span>
<span class="o">%</span><span class="k">config</span> InlineBackend.figure_format=&#39;retina&#39;
</pre></div>
</div>
</div>
</div>
<section id="define-needed-functions">
<h3>Define needed functions<a class="headerlink" href="#define-needed-functions" title="Permalink to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">target_basis_circ</span><span class="p">(</span><span class="n">bitstring</span><span class="p">,</span> <span class="n">with_reset</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Prep and measure target computational basis state.</span>
<span class="sd">    </span>
<span class="sd">    Parameters:</span>
<span class="sd">        bitstring (str): The target basis state</span>
<span class="sd">        with_reset (bool or int): Use a reset at beginning, default=False.</span>
<span class="sd">        </span>
<span class="sd">    Returns:</span>
<span class="sd">        QuantumCircuit: Circuit.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">with_reset</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">with_reset</span><span class="p">)</span>
    <span class="n">num_qubits</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">bitstring</span><span class="p">)</span>
    <span class="n">qc</span> <span class="o">=</span> <span class="n">QuantumCircuit</span><span class="p">(</span><span class="n">num_qubits</span><span class="p">)</span>
    <span class="n">qc</span><span class="o">.</span><span class="n">barrier</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">with_reset</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">jj</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">with_reset</span><span class="p">):</span>
            <span class="n">qc</span><span class="o">.</span><span class="n">reset</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">num_qubits</span><span class="p">))</span>
            <span class="n">qc</span><span class="o">.</span><span class="n">barrier</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">kk</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_qubits</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">bitstring</span><span class="p">[</span><span class="n">kk</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;1&#39;</span><span class="p">:</span>
            <span class="n">qc</span><span class="o">.</span><span class="n">x</span><span class="p">(</span><span class="n">num_qubits</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="n">kk</span><span class="p">)</span>
    <span class="n">qc</span><span class="o">.</span><span class="n">measure_all</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">qc</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">hamming_distance</span><span class="p">(</span><span class="n">str1</span><span class="p">,</span> <span class="n">str2</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Hamming distance between two bit strings.</span>
<span class="sd">    </span>
<span class="sd">    Parameters:</span>
<span class="sd">        str1 (str): Bit string 1.</span>
<span class="sd">        str2 (str): Bit string 2.</span>
<span class="sd">        </span>
<span class="sd">    Returns:</span>
<span class="sd">        int: Hamming distance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="n">c1</span> <span class="o">!=</span> <span class="n">c2</span> <span class="k">for</span> <span class="n">c1</span><span class="p">,</span> <span class="n">c2</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">str1</span><span class="p">,</span> <span class="n">str2</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">hamming_fraction</span><span class="p">(</span><span class="n">counts</span><span class="p">,</span> <span class="n">target_state</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Hamming fraction of counts data from target state.</span>
<span class="sd">    </span>
<span class="sd">    Parameters:</span>
<span class="sd">        counts (Counts): Counts data.</span>
<span class="sd">        target_state (str): Target bit string state</span>
<span class="sd">        </span>
<span class="sd">    Returns:</span>
<span class="sd">        float: Hamming fraction.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">num_shots</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">counts</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
    <span class="n">num_qubits</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">target_state</span><span class="p">)</span>

    <span class="n">avg_hamming_dist</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">counts</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">ham_dist</span> <span class="o">=</span> <span class="n">hamming_distance</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">target_state</span><span class="p">)</span>
        <span class="n">avg_hamming_dist</span> <span class="o">+=</span> <span class="n">ham_dist</span><span class="o">*</span><span class="p">(</span><span class="n">val</span><span class="o">/</span><span class="n">num_shots</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">avg_hamming_dist</span><span class="o">/</span><span class="n">num_qubits</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="experiments">
<h2>Experiments<a class="headerlink" href="#experiments" title="Permalink to this heading">#</a></h2>
<p>Here we measure the SPAM error rate per qubit for the all-zeros and all-ones states as a function of <code class="docutils literal notranslate"><span class="pre">rep_delay</span></code> and also explore the use of <code class="docutils literal notranslate"><span class="pre">resets</span></code> and the <code class="docutils literal notranslate"><span class="pre">init_qubits</span></code> functionality.  We expect these two states to be different as the all-ones state is affected by <span class="math notranslate nohighlight">\(T_{1}\)</span> whereas th all-zeros state is weakly affected by thermal excitations.  What we a priori do not know is how a change in <code class="docutils literal notranslate"><span class="pre">rep_delay</span></code> changes the per qubit SPAM error rate, nor how does the use of <code class="docutils literal notranslate"><span class="pre">reset</span></code> operations changes anything.  Things are also likely system specific so we just need to explore.</p>
<section id="effect-of-rep-delay-on-state-prep-error">
<h3>Effect of <code class="docutils literal notranslate"><span class="pre">rep_delay</span></code> on state prep error<a class="headerlink" href="#effect-of-rep-delay-on-state-prep-error" title="Permalink to this heading">#</a></h3>
<p>To begin let us look at a good example of how varying the <code class="docutils literal notranslate"><span class="pre">rep_delay</span></code> can affect the error rate of our system.  Here we will look at some data taken with the above routines on the <code class="docutils literal notranslate"><span class="pre">ibmq_montreal</span></code> system which is a 27Q Falcon R4 device.  Since not everyone has access to this system I will just show the data.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">rep_range</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">500e-6</span><span class="p">,</span> <span class="mi">21</span><span class="p">)</span>
<span class="n">default_rep_delay</span> <span class="o">=</span> <span class="mf">50e-6</span>

<span class="n">mon_p0</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.01859538</span><span class="p">,</span> <span class="mf">0.01435456</span><span class="p">,</span> <span class="mf">0.01327854</span><span class="p">,</span> <span class="mf">0.01304344</span><span class="p">,</span> <span class="mf">0.01346842</span><span class="p">,</span>
                   <span class="mf">0.01193576</span><span class="p">,</span> <span class="mf">0.01227485</span><span class="p">,</span> <span class="mf">0.01321976</span><span class="p">,</span> <span class="mf">0.01191768</span><span class="p">,</span> <span class="mf">0.01208044</span><span class="p">,</span>
                   <span class="mf">0.01304796</span><span class="p">,</span> <span class="mf">0.0121573</span> <span class="p">,</span> <span class="mf">0.01279026</span><span class="p">,</span> <span class="mf">0.01174136</span><span class="p">,</span> <span class="mf">0.01214374</span><span class="p">,</span>
                   <span class="mf">0.0123065</span> <span class="p">,</span> <span class="mf">0.01269983</span><span class="p">,</span> <span class="mf">0.01199454</span><span class="p">,</span> <span class="mf">0.01240596</span><span class="p">,</span> <span class="mf">0.01259585</span><span class="p">,</span>
                   <span class="mf">0.01262297</span><span class="p">])</span>

<span class="n">mon_p1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.03958243</span><span class="p">,</span> <span class="mf">0.03575304</span><span class="p">,</span> <span class="mf">0.03152579</span><span class="p">,</span> <span class="mf">0.0313359</span> <span class="p">,</span> <span class="mf">0.03016493</span><span class="p">,</span>
                   <span class="mf">0.02918837</span><span class="p">,</span> <span class="mf">0.0288538</span> <span class="p">,</span> <span class="mf">0.02802192</span><span class="p">,</span> <span class="mf">0.02780038</span><span class="p">,</span> <span class="mf">0.02611853</span><span class="p">,</span>
                   <span class="mf">0.02565737</span><span class="p">,</span> <span class="mf">0.02574779</span><span class="p">,</span> <span class="mf">0.02615469</span><span class="p">,</span> <span class="mf">0.02652543</span><span class="p">,</span> <span class="mf">0.02592864</span><span class="p">,</span>
                   <span class="mf">0.02576588</span><span class="p">,</span> <span class="mf">0.0268193</span> <span class="p">,</span> <span class="mf">0.02578848</span><span class="p">,</span> <span class="mf">0.02498825</span><span class="p">,</span> <span class="mf">0.0264124</span> <span class="p">,</span>
                   <span class="mf">0.02582917</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">default_rep_delay</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;dashed&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">rep_range</span><span class="p">,</span> <span class="n">mon_p0</span><span class="p">,</span> <span class="s1">&#39;o&#39;</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;prep0_error&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">rep_range</span><span class="p">,</span> <span class="n">mon_p1</span><span class="p">,</span> <span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;prep1_error&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.05</span><span class="p">])</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Rep delay&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Avg. error rate&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1"> SPAM vs rep_delay&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;ibmq_montreal&#39;</span><span class="p">),</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">yticks</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/9bd1e7b458a6bd9b2721b691d5946ebd4f465feac96980527863caeea3cd2c7e.png" src="../../_images/9bd1e7b458a6bd9b2721b691d5946ebd4f465feac96980527863caeea3cd2c7e.png" />
</div>
</div>
<p>Montreal is the system with the fastest <code class="docutils literal notranslate"><span class="pre">default_rep_delay</span></code> at <span class="math notranslate nohighlight">\(50~\mu \rm s\)</span> (vertical dashed line).  Above we see a very clear rise in error rates as the <code class="docutils literal notranslate"><span class="pre">rep_delay</span></code> increases indicating state prep errors starting to creep in.  For those users trying to maximize the fidelity of results, going up to something around <span class="math notranslate nohighlight">\(200~\mu \rm s\)</span> for <code class="docutils literal notranslate"><span class="pre">rep_delay</span></code> is likely a good thing to do here.</p>
</section>
<section id="q-manila-system">
<h3>5Q Manila system<a class="headerlink" href="#q-manila-system" title="Permalink to this heading">#</a></h3>
<p>Here I pick the <code class="docutils literal notranslate"><span class="pre">ibmq_manila</span></code> system as no one else is on it at the moment and it is a public system.  It is a 5Q system based on the Falcon 5.11 processor revison.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">IBMQ</span><span class="o">.</span><span class="n">load_account</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;AccountProvider for IBMQ(hub=&#39;ibm-q&#39;, group=&#39;open&#39;, project=&#39;main&#39;)&gt;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">provider</span> <span class="o">=</span> <span class="n">IBMQ</span><span class="o">.</span><span class="n">get_provider</span><span class="p">(</span><span class="n">project</span><span class="o">=</span><span class="s1">&#39;internal-test&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">backend</span> <span class="o">=</span> <span class="n">provider</span><span class="o">.</span><span class="n">backend</span><span class="o">.</span><span class="n">ibm_auckland</span>
<span class="n">num_qubits</span> <span class="o">=</span> <span class="n">backend</span><span class="o">.</span><span class="n">configuration</span><span class="p">()</span><span class="o">.</span><span class="n">num_qubits</span>
<span class="n">max_shots</span> <span class="o">=</span> <span class="n">backend</span><span class="o">.</span><span class="n">configuration</span><span class="p">()</span><span class="o">.</span><span class="n">max_shots</span>
</pre></div>
</div>
</div>
</div>
<p>Let us check the default <code class="docutils literal notranslate"><span class="pre">rep_delay</span></code> and <code class="docutils literal notranslate"><span class="pre">rep_delay_range</span></code> on this system:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">default_rep_delay</span> <span class="o">=</span> <span class="n">backend</span><span class="o">.</span><span class="n">configuration</span><span class="p">()</span><span class="o">.</span><span class="n">default_rep_delay</span>
<span class="n">rep_delay_range</span> <span class="o">=</span> <span class="n">backend</span><span class="o">.</span><span class="n">configuration</span><span class="p">()</span><span class="o">.</span><span class="n">rep_delay_range</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Default rep delay = </span><span class="si">{}</span><span class="s1"> us&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">default_rep_delay</span><span class="o">*</span><span class="mf">1e6</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;rep delay range : [</span><span class="si">{}</span><span class="s1">, </span><span class="si">{}</span><span class="s1">] us&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">rep_delay_range</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                                             <span class="n">rep_delay_range</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="mf">1e6</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Default rep delay = 250.0 us
rep delay range : [0.0, 500.0] us
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">rep_range</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">rep_delay_range</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">11</span><span class="p">)</span>
<span class="n">num_shots</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="mi">10000</span><span class="p">,</span> <span class="n">max_shots</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<section id="spam-error-rate-with-no-resets">
<h4>SPAM error rate with no resets<a class="headerlink" href="#spam-error-rate-with-no-resets" title="Permalink to this heading">#</a></h4>
<p>To begin we are going to reproduce the same plot as we did for Montreal by looping over <code class="docutils literal notranslate"><span class="pre">rep_range</span></code> and computing the Hamming fraction that is the error rate we are looking for.  Here we do not use <code class="docutils literal notranslate"><span class="pre">reset</span></code> instructions at the beginning.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">prep0_errors</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">prep1_errors</span> <span class="o">=</span> <span class="p">[]</span>

<span class="n">zeros_state</span> <span class="o">=</span> <span class="s1">&#39;0&#39;</span><span class="o">*</span><span class="n">num_qubits</span>
<span class="n">ones_state</span> <span class="o">=</span> <span class="s1">&#39;1&#39;</span><span class="o">*</span><span class="n">num_qubits</span>
<span class="n">use_resets</span> <span class="o">=</span> <span class="kc">False</span>

<span class="k">for</span> <span class="n">delay</span> <span class="ow">in</span> <span class="n">rep_range</span><span class="p">:</span>
    <span class="n">zeros_job</span> <span class="o">=</span> <span class="n">backend</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">target_basis_circ</span><span class="p">(</span><span class="n">zeros_state</span><span class="p">,</span> <span class="n">use_resets</span><span class="p">),</span>
                            <span class="n">shots</span><span class="o">=</span><span class="n">num_shots</span><span class="p">,</span> <span class="n">rep_delay</span><span class="o">=</span><span class="n">delay</span><span class="p">)</span>
    <span class="n">ones_job</span> <span class="o">=</span> <span class="n">backend</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">target_basis_circ</span><span class="p">(</span><span class="n">ones_state</span><span class="p">,</span> <span class="n">use_resets</span><span class="p">),</span>
                           <span class="n">shots</span><span class="o">=</span><span class="n">num_shots</span><span class="p">,</span> <span class="n">rep_delay</span><span class="o">=</span><span class="n">delay</span><span class="p">)</span>
    
    <span class="n">zeros_counts</span> <span class="o">=</span> <span class="n">zeros_job</span><span class="o">.</span><span class="n">result</span><span class="p">()</span><span class="o">.</span><span class="n">get_counts</span><span class="p">()</span>
    <span class="n">ones_counts</span> <span class="o">=</span> <span class="n">ones_job</span><span class="o">.</span><span class="n">result</span><span class="p">()</span><span class="o">.</span><span class="n">get_counts</span><span class="p">()</span>

    <span class="n">p_zeros</span> <span class="o">=</span> <span class="n">hamming_fraction</span><span class="p">(</span><span class="n">zeros_counts</span><span class="p">,</span> <span class="n">zeros_state</span><span class="p">)</span>
    <span class="n">p_ones</span> <span class="o">=</span> <span class="n">hamming_fraction</span><span class="p">(</span><span class="n">ones_counts</span><span class="p">,</span> <span class="n">ones_state</span><span class="p">)</span>
    
    <span class="n">prep0_errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p_zeros</span><span class="p">)</span>
    <span class="n">prep1_errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p_ones</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Here we plot the data along with the <code class="docutils literal notranslate"><span class="pre">default_rep_delay</span></code> represented by the vertical dashed line.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">default_rep_delay</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;dashed&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">rep_range</span><span class="p">,</span> <span class="n">prep0_errors</span><span class="p">,</span> <span class="s1">&#39;o&#39;</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;prep0_error&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">rep_range</span><span class="p">,</span> <span class="n">prep1_errors</span><span class="p">,</span> <span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;prep1_error&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.1</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">);</span>
<span class="n">plt</span><span class="o">.</span><span class="n">yticks</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">);</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Rep delay&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Avg. error rate&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1"> SPAM vs rep_delay (resets=</span><span class="si">{}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">backend</span><span class="o">.</span><span class="n">name</span><span class="p">(),</span>
                                                       <span class="n">use_resets</span><span class="p">),</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/2bfbc4d872a9fc30a1591456afe4373ae0cd45a07bb39fccef136b73f82ecf2b.png" src="../../_images/2bfbc4d872a9fc30a1591456afe4373ae0cd45a07bb39fccef136b73f82ecf2b.png" />
</div>
</div>
<p>So we see that the all-ones state is hovering at about 6.5% error whilst the all-zeros state is around 1%.  The measurement error rate reported by the backend is 5% and 1.5%, respectively.  That data is taken at the <code class="docutils literal notranslate"><span class="pre">default_rep_delay</span></code>.  The all-ones data is a bit hard to interpret, but for the all-zeros state you can see a gradual increase in the error as we decrease <code class="docutils literal notranslate"><span class="pre">rep_delay</span></code>.  Not as clear cut a story as on Montreal, and the all-ones error is quite a bit higher (~2x).</p>
<p>In the above we do see that resets help here in giving you a ~0.5% decrease in the error rates.  We are still not seeing a clear trend when verying <code class="docutils literal notranslate"><span class="pre">rep_delay</span></code> but progress is being made.</p>
</section>
<section id="spam-error-rate-with-reset-and-no-implicit-reset">
<h4>SPAM error rate with reset and NO implicit reset<a class="headerlink" href="#spam-error-rate-with-reset-and-no-implicit-reset" title="Permalink to this heading">#</a></h4>
<p>Just for fun, lets turn off implicit reset using <code class="docutils literal notranslate"><span class="pre">init_qubits=False</span></code> and see what the error rate looks like if we rely on a single reset alone for the state prep.</p>
<p>So now we see some interesting stuff.  Using only a single-reset for preping the qubits to the zeros state we see that the all-ones error is overall bigger and trends higher as we decrease <code class="docutils literal notranslate"><span class="pre">rep_delay</span></code>.  However, the error in the all-zeros state is much lower than before.</p>
</section>
<section id="spam-error-rate-using-3x-resets">
<h4>SPAM error rate using 3x resets<a class="headerlink" href="#spam-error-rate-using-3x-resets" title="Permalink to this heading">#</a></h4>
<p>The above hints that maybe good things can happen if we used more resets at the beginning.  I say this because applying more than one reset should have things looking closer to the all-zeros state when it hits the later resets where we see some improvement.  Lets see what happens.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">prep0_errors_fun3</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">prep1_errors_fun3</span> <span class="o">=</span> <span class="p">[]</span>

<span class="n">zeros_state</span> <span class="o">=</span> <span class="s1">&#39;0&#39;</span><span class="o">*</span><span class="n">num_qubits</span>
<span class="n">ones_state</span> <span class="o">=</span> <span class="s1">&#39;1&#39;</span><span class="o">*</span><span class="n">num_qubits</span>
<span class="n">use_resets</span> <span class="o">=</span> <span class="mi">3</span>

<span class="k">for</span> <span class="n">delay</span> <span class="ow">in</span> <span class="n">rep_range</span><span class="p">:</span>
    <span class="n">zeros_job</span> <span class="o">=</span> <span class="n">backend</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">target_basis_circ</span><span class="p">(</span><span class="n">zeros_state</span><span class="p">,</span> <span class="n">use_resets</span><span class="p">),</span>
                            <span class="n">shots</span><span class="o">=</span><span class="n">num_shots</span><span class="p">,</span> <span class="n">rep_delay</span><span class="o">=</span><span class="n">delay</span><span class="p">,</span> <span class="n">init_qubits</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">ones_job</span> <span class="o">=</span> <span class="n">backend</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">target_basis_circ</span><span class="p">(</span><span class="n">ones_state</span><span class="p">,</span> <span class="n">use_resets</span><span class="p">),</span>
                           <span class="n">shots</span><span class="o">=</span><span class="n">num_shots</span><span class="p">,</span> <span class="n">rep_delay</span><span class="o">=</span><span class="n">delay</span><span class="p">,</span> <span class="n">init_qubits</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    
    <span class="n">zeros_counts</span> <span class="o">=</span> <span class="n">zeros_job</span><span class="o">.</span><span class="n">result</span><span class="p">()</span><span class="o">.</span><span class="n">get_counts</span><span class="p">()</span>
    <span class="n">ones_counts</span> <span class="o">=</span> <span class="n">ones_job</span><span class="o">.</span><span class="n">result</span><span class="p">()</span><span class="o">.</span><span class="n">get_counts</span><span class="p">()</span>

    <span class="n">p_zeros</span> <span class="o">=</span> <span class="n">hamming_fraction</span><span class="p">(</span><span class="n">zeros_counts</span><span class="p">,</span> <span class="n">zeros_state</span><span class="p">)</span>
    <span class="n">p_ones</span> <span class="o">=</span> <span class="n">hamming_fraction</span><span class="p">(</span><span class="n">ones_counts</span><span class="p">,</span> <span class="n">ones_state</span><span class="p">)</span>
    
    <span class="n">prep0_errors_fun3</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p_zeros</span><span class="p">)</span>
    <span class="n">prep1_errors_fun3</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p_ones</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">default_rep_delay</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;dashed&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">rep_range</span><span class="p">,</span> <span class="n">prep0_errors</span><span class="p">,</span> <span class="s1">&#39;o&#39;</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;prep0_error&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">rep_range</span><span class="p">,</span> <span class="n">prep1_errors</span><span class="p">,</span> <span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;prep1_error&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">rep_range</span><span class="p">,</span> <span class="n">prep0_errors_fun3</span><span class="p">,</span> <span class="s1">&#39;o&#39;</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;prep0_error_3xreset_only&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">rep_range</span><span class="p">,</span> <span class="n">prep1_errors_fun3</span><span class="p">,</span> <span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;prep1_error_3xreset_only&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.04</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">);</span>
<span class="n">plt</span><span class="o">.</span><span class="n">yticks</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">);</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Rep delay&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Avg. error rate&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1"> SPAM using 3x resets for prep&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">backend</span><span class="o">.</span><span class="n">name</span><span class="p">()),</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/ac6b235b890cfeced329bf567346bca44ca2bed57263b38283ce2670d297d8d2.png" src="../../_images/ac6b235b890cfeced329bf567346bca44ca2bed57263b38283ce2670d297d8d2.png" />
</div>
</div>
<p>Oh man, we have decreased that error rate in the all-ones state by a factor of 2x AND it is independent of <code class="docutils literal notranslate"><span class="pre">rep_delay</span></code>.  That is to say <strong>we have reduced the error rate and increased the throughput of our system since we can set <code class="docutils literal notranslate"><span class="pre">rep_delay=0</span></code></strong>.  This is cool but also a bit surprising as the reported readout error is 3.25% and we are seeing less than that and readout error also has state prep errors implicitly in there.</p>
</section>
</section>
<section id="q-jakarta-system">
<h3>7Q Jakarta system<a class="headerlink" href="#q-jakarta-system" title="Permalink to this heading">#</a></h3>
<p>The Jakarta system is all the rage these days, e.g. see https://twitter.com/MJBiercuk/status/1456346789561335808 and https://twitter.com/blake_johnson/status/1456687596474671110.  Lets see if we can improve things on that Falcon 5.11 based system as well.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">backend</span> <span class="o">=</span> <span class="n">provider</span><span class="o">.</span><span class="n">backend</span><span class="o">.</span><span class="n">ibmq_jakarta</span>
<span class="n">num_qubits</span> <span class="o">=</span> <span class="n">backend</span><span class="o">.</span><span class="n">configuration</span><span class="p">()</span><span class="o">.</span><span class="n">num_qubits</span>

<span class="n">default_rep_delay</span> <span class="o">=</span> <span class="n">backend</span><span class="o">.</span><span class="n">configuration</span><span class="p">()</span><span class="o">.</span><span class="n">default_rep_delay</span>
<span class="n">rep_delay_range</span> <span class="o">=</span> <span class="n">backend</span><span class="o">.</span><span class="n">configuration</span><span class="p">()</span><span class="o">.</span><span class="n">rep_delay_range</span>

<span class="n">rep_range</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">rep_delay_range</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">11</span><span class="p">)</span>
<span class="n">num_shots</span> <span class="o">=</span> <span class="mi">10000</span>
</pre></div>
</div>
</div>
</div>
<section id="spam-error-rate">
<h4>SPAM error rate<a class="headerlink" href="#spam-error-rate" title="Permalink to this heading">#</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">prep0_errors_jk</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">prep1_errors_jk</span> <span class="o">=</span> <span class="p">[]</span>

<span class="n">zeros_state</span> <span class="o">=</span> <span class="s1">&#39;0&#39;</span><span class="o">*</span><span class="n">num_qubits</span>
<span class="n">ones_state</span> <span class="o">=</span> <span class="s1">&#39;1&#39;</span><span class="o">*</span><span class="n">num_qubits</span>
<span class="n">use_resets</span> <span class="o">=</span> <span class="kc">False</span>

<span class="k">for</span> <span class="n">delay</span> <span class="ow">in</span> <span class="n">rep_range</span><span class="p">:</span>
    <span class="n">zeros_job</span> <span class="o">=</span> <span class="n">backend</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">target_basis_circ</span><span class="p">(</span><span class="n">zeros_state</span><span class="p">,</span> <span class="n">use_resets</span><span class="p">),</span>
                            <span class="n">shots</span><span class="o">=</span><span class="n">num_shots</span><span class="p">,</span> <span class="n">rep_delay</span><span class="o">=</span><span class="n">delay</span><span class="p">)</span>
    <span class="n">ones_job</span> <span class="o">=</span> <span class="n">backend</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">target_basis_circ</span><span class="p">(</span><span class="n">ones_state</span><span class="p">,</span> <span class="n">use_resets</span><span class="p">),</span>
                           <span class="n">shots</span><span class="o">=</span><span class="n">num_shots</span><span class="p">,</span> <span class="n">rep_delay</span><span class="o">=</span><span class="n">delay</span><span class="p">)</span>
    
    <span class="n">zeros_counts</span> <span class="o">=</span> <span class="n">zeros_job</span><span class="o">.</span><span class="n">result</span><span class="p">()</span><span class="o">.</span><span class="n">get_counts</span><span class="p">()</span>
    <span class="n">ones_counts</span> <span class="o">=</span> <span class="n">ones_job</span><span class="o">.</span><span class="n">result</span><span class="p">()</span><span class="o">.</span><span class="n">get_counts</span><span class="p">()</span>

    <span class="n">p_zeros</span> <span class="o">=</span> <span class="n">hamming_fraction</span><span class="p">(</span><span class="n">zeros_counts</span><span class="p">,</span> <span class="n">zeros_state</span><span class="p">)</span>
    <span class="n">p_ones</span> <span class="o">=</span> <span class="n">hamming_fraction</span><span class="p">(</span><span class="n">ones_counts</span><span class="p">,</span> <span class="n">ones_state</span><span class="p">)</span>
    
    <span class="n">prep0_errors_jk</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p_zeros</span><span class="p">)</span>
    <span class="n">prep1_errors_jk</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p_ones</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">default_rep_delay</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;dashed&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">rep_range</span><span class="p">,</span> <span class="n">prep0_errors_jk</span><span class="p">,</span> <span class="s1">&#39;o&#39;</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;prep0_error&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">rep_range</span><span class="p">,</span> <span class="n">prep1_errors_jk</span><span class="p">,</span> <span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;prep1_error&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.1</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">);</span>
<span class="n">plt</span><span class="o">.</span><span class="n">yticks</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">);</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Rep delay&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Avg. error rate&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1"> SPAM vs rep_delay (resets=</span><span class="si">{}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">backend</span><span class="o">.</span><span class="n">name</span><span class="p">(),</span>
                                                       <span class="n">use_resets</span><span class="p">),</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/37ef8a6ce910c38595b4fa441f336ba77f41da4c2a135a5459a442eab42dfb3c.png" src="../../_images/37ef8a6ce910c38595b4fa441f336ba77f41da4c2a135a5459a442eab42dfb3c.png" />
</div>
</div>
</section>
<section id="id1">
<h4>SPAM error rate using 3x resets<a class="headerlink" href="#id1" title="Permalink to this heading">#</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">prep0_errors_jk3</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">prep1_errors_jk3</span> <span class="o">=</span> <span class="p">[]</span>

<span class="n">zeros_state</span> <span class="o">=</span> <span class="s1">&#39;0&#39;</span><span class="o">*</span><span class="n">num_qubits</span>
<span class="n">ones_state</span> <span class="o">=</span> <span class="s1">&#39;1&#39;</span><span class="o">*</span><span class="n">num_qubits</span>
<span class="n">use_resets</span> <span class="o">=</span> <span class="mi">3</span>

<span class="k">for</span> <span class="n">delay</span> <span class="ow">in</span> <span class="n">rep_range</span><span class="p">:</span>
    <span class="n">zeros_job</span> <span class="o">=</span> <span class="n">backend</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">target_basis_circ</span><span class="p">(</span><span class="n">zeros_state</span><span class="p">,</span> <span class="n">use_resets</span><span class="p">),</span>
                            <span class="n">shots</span><span class="o">=</span><span class="n">num_shots</span><span class="p">,</span> <span class="n">rep_delay</span><span class="o">=</span><span class="n">delay</span><span class="p">,</span> <span class="n">init_qubits</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">ones_job</span> <span class="o">=</span> <span class="n">backend</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">target_basis_circ</span><span class="p">(</span><span class="n">ones_state</span><span class="p">,</span> <span class="n">use_resets</span><span class="p">),</span>
                           <span class="n">shots</span><span class="o">=</span><span class="n">num_shots</span><span class="p">,</span> <span class="n">rep_delay</span><span class="o">=</span><span class="n">delay</span><span class="p">,</span> <span class="n">init_qubits</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    
    <span class="n">zeros_counts</span> <span class="o">=</span> <span class="n">zeros_job</span><span class="o">.</span><span class="n">result</span><span class="p">()</span><span class="o">.</span><span class="n">get_counts</span><span class="p">()</span>
    <span class="n">ones_counts</span> <span class="o">=</span> <span class="n">ones_job</span><span class="o">.</span><span class="n">result</span><span class="p">()</span><span class="o">.</span><span class="n">get_counts</span><span class="p">()</span>

    <span class="n">p_zeros</span> <span class="o">=</span> <span class="n">hamming_fraction</span><span class="p">(</span><span class="n">zeros_counts</span><span class="p">,</span> <span class="n">zeros_state</span><span class="p">)</span>
    <span class="n">p_ones</span> <span class="o">=</span> <span class="n">hamming_fraction</span><span class="p">(</span><span class="n">ones_counts</span><span class="p">,</span> <span class="n">ones_state</span><span class="p">)</span>
    
    <span class="n">prep0_errors_jk3</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p_zeros</span><span class="p">)</span>
    <span class="n">prep1_errors_jk3</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p_ones</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">prep1_errors_jk3</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[0.06218571428571429,
 0.08791428571428574,
 0.06212857142857142,
 0.06324285714285713,
 0.05925714285714285,
 0.0589,
 0.058785714285714274,
 0.057757142857142854,
 0.05811428571428571,
 0.07254285714285713,
 0.058857142857142865]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">default_rep_delay</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;dashed&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">rep_range</span><span class="p">,</span> <span class="n">prep0_errors_jk3</span><span class="p">,</span> <span class="s1">&#39;o&#39;</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;prep0_error&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">rep_range</span><span class="p">,</span> <span class="n">prep1_errors_jk3</span><span class="p">,</span> <span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;prep1_error&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.1</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">);</span>
<span class="n">plt</span><span class="o">.</span><span class="n">yticks</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">);</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Rep delay&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Avg. error rate&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1"> SPAM vs rep_delay (resets=</span><span class="si">{}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">backend</span><span class="o">.</span><span class="n">name</span><span class="p">(),</span>
                                                       <span class="n">use_resets</span><span class="p">),</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/6dab7aedb793e0202c014e7df478b3f6c13e5ff46a3d53cd6a83bdd32030be18.png" src="../../_images/6dab7aedb793e0202c014e7df478b3f6c13e5ff46a3d53cd6a83bdd32030be18.png" />
</div>
</div>
<p>We see that life is not easy.  On Jakarata, going to 3x resets does not improve things.  Instead it makes all the error rates slightly worse.  This is why the 3x <code class="docutils literal notranslate"><span class="pre">reset</span></code> is not default; most systems still work best with unconditional reset.  Exploring other systems one finds similar findings.</p>
</section>
</section>
</section>
<section id="data-for-other-systems">
<h2>Data for other systems<a class="headerlink" href="#data-for-other-systems" title="Permalink to this heading">#</a></h2>
<p>Here we show some data for other systems with and without a <code class="docutils literal notranslate"><span class="pre">reset</span></code> at the beginning but all using unconditional reset.  Overall we see that a <code class="docutils literal notranslate"><span class="pre">reset</span></code> at the beginning offers improved error rates.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">rep_range</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">500e-6</span><span class="p">,</span> <span class="mi">21</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<section id="montreal">
<h3>Montreal<a class="headerlink" href="#montreal" title="Permalink to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">default_rep_delay</span> <span class="o">=</span> <span class="mf">50e-6</span>

<span class="n">mon_p0</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.01859538</span><span class="p">,</span> <span class="mf">0.01435456</span><span class="p">,</span> <span class="mf">0.01327854</span><span class="p">,</span> <span class="mf">0.01304344</span><span class="p">,</span> <span class="mf">0.01346842</span><span class="p">,</span>
                   <span class="mf">0.01193576</span><span class="p">,</span> <span class="mf">0.01227485</span><span class="p">,</span> <span class="mf">0.01321976</span><span class="p">,</span> <span class="mf">0.01191768</span><span class="p">,</span> <span class="mf">0.01208044</span><span class="p">,</span>
                   <span class="mf">0.01304796</span><span class="p">,</span> <span class="mf">0.0121573</span> <span class="p">,</span> <span class="mf">0.01279026</span><span class="p">,</span> <span class="mf">0.01174136</span><span class="p">,</span> <span class="mf">0.01214374</span><span class="p">,</span>
                   <span class="mf">0.0123065</span> <span class="p">,</span> <span class="mf">0.01269983</span><span class="p">,</span> <span class="mf">0.01199454</span><span class="p">,</span> <span class="mf">0.01240596</span><span class="p">,</span> <span class="mf">0.01259585</span><span class="p">,</span>
                   <span class="mf">0.01262297</span><span class="p">])</span>

<span class="n">mon_p1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.03958243</span><span class="p">,</span> <span class="mf">0.03575304</span><span class="p">,</span> <span class="mf">0.03152579</span><span class="p">,</span> <span class="mf">0.0313359</span> <span class="p">,</span> <span class="mf">0.03016493</span><span class="p">,</span>
                   <span class="mf">0.02918837</span><span class="p">,</span> <span class="mf">0.0288538</span> <span class="p">,</span> <span class="mf">0.02802192</span><span class="p">,</span> <span class="mf">0.02780038</span><span class="p">,</span> <span class="mf">0.02611853</span><span class="p">,</span>
                   <span class="mf">0.02565737</span><span class="p">,</span> <span class="mf">0.02574779</span><span class="p">,</span> <span class="mf">0.02615469</span><span class="p">,</span> <span class="mf">0.02652543</span><span class="p">,</span> <span class="mf">0.02592864</span><span class="p">,</span>
                   <span class="mf">0.02576588</span><span class="p">,</span> <span class="mf">0.0268193</span> <span class="p">,</span> <span class="mf">0.02578848</span><span class="p">,</span> <span class="mf">0.02498825</span><span class="p">,</span> <span class="mf">0.0264124</span> <span class="p">,</span>
                   <span class="mf">0.02582917</span><span class="p">])</span>

<span class="n">mon_p0_reset</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.02195909</span><span class="p">,</span> <span class="mf">0.01358597</span><span class="p">,</span> <span class="mf">0.01205331</span><span class="p">,</span> <span class="mf">0.01309317</span><span class="p">,</span> <span class="mf">0.01126212</span><span class="p">,</span>
                         <span class="mf">0.012736</span>  <span class="p">,</span> <span class="mf">0.0123065</span> <span class="p">,</span> <span class="mf">0.01159668</span><span class="p">,</span> <span class="mf">0.01090947</span><span class="p">,</span> <span class="mf">0.01222059</span><span class="p">,</span>
                         <span class="mf">0.01159668</span><span class="p">,</span> <span class="mf">0.01186343</span><span class="p">,</span> <span class="mf">0.01151982</span><span class="p">,</span> <span class="mf">0.01211209</span><span class="p">,</span> <span class="mf">0.01220251</span><span class="p">,</span>
                         <span class="mf">0.01299823</span><span class="p">,</span> <span class="mf">0.01171423</span><span class="p">,</span> <span class="mf">0.01250995</span><span class="p">,</span> <span class="mf">0.01260489</span><span class="p">,</span> <span class="mf">0.01670103</span><span class="p">,</span>
                         <span class="mf">0.01185438</span><span class="p">])</span>

<span class="n">mon_p1_reset</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.03072555</span><span class="p">,</span> <span class="mf">0.02814851</span><span class="p">,</span> <span class="mf">0.02775517</span><span class="p">,</span> <span class="mf">0.02593768</span><span class="p">,</span> <span class="mf">0.02627224</span><span class="p">,</span>
                         <span class="mf">0.02506058</span><span class="p">,</span> <span class="mf">0.0269052</span> <span class="p">,</span> <span class="mf">0.02725333</span><span class="p">,</span> <span class="mf">0.02639431</span><span class="p">,</span> <span class="mf">0.02749747</span><span class="p">,</span>
                         <span class="mf">0.02656612</span><span class="p">,</span> <span class="mf">0.02648926</span><span class="p">,</span> <span class="mf">0.02685095</span><span class="p">,</span> <span class="mf">0.02152054</span><span class="p">,</span> <span class="mf">0.02158836</span><span class="p">,</span>
                         <span class="mf">0.02160645</span><span class="p">,</span> <span class="mf">0.02177373</span><span class="p">,</span> <span class="mf">0.02202239</span><span class="p">,</span> <span class="mf">0.02124476</span><span class="p">,</span> <span class="mf">0.0212764</span> <span class="p">,</span>
                         <span class="mf">0.0215748</span> <span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">default_rep_delay</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;dashed&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">rep_range</span><span class="p">,</span> <span class="n">mon_p0</span><span class="p">,</span> <span class="s1">&#39;o&#39;</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;prep0_error&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">rep_range</span><span class="p">,</span> <span class="n">mon_p1</span><span class="p">,</span> <span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;prep1_error&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">rep_range</span><span class="p">,</span> <span class="n">mon_p0_reset</span><span class="p">,</span> <span class="s1">&#39;o&#39;</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;prep0_error_reset&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">rep_range</span><span class="p">,</span> <span class="n">mon_p1_reset</span><span class="p">,</span> <span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;prep1_error_reset&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.05</span><span class="p">])</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Rep delay&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Avg. error rate&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1"> SPAM vs rep_delay&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;ibmq_montreal&#39;</span><span class="p">),</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">yticks</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/b615453800a64c25dd788957b0875c1ac70f1cd80ef740b7bdb73e8320509f20.png" src="../../_images/b615453800a64c25dd788957b0875c1ac70f1cd80ef740b7bdb73e8320509f20.png" />
</div>
</div>
</section>
<section id="hanoi">
<h3>Hanoi<a class="headerlink" href="#hanoi" title="Permalink to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">default_rep_delay</span> <span class="o">=</span> <span class="mf">250e-6</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">han_p0</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.02571615</span><span class="p">,</span> <span class="mf">0.02364999</span><span class="p">,</span> <span class="mf">0.0232024</span> <span class="p">,</span> <span class="mf">0.02805809</span><span class="p">,</span> <span class="mf">0.02027724</span><span class="p">,</span>
                   <span class="mf">0.01981156</span><span class="p">,</span> <span class="mf">0.01975279</span><span class="p">,</span> <span class="mf">0.02103226</span><span class="p">,</span> <span class="mf">0.02319788</span><span class="p">,</span> <span class="mf">0.02500633</span><span class="p">,</span>
                   <span class="mf">0.02836552</span><span class="p">,</span> <span class="mf">0.02222584</span><span class="p">,</span> <span class="mf">0.02804</span>   <span class="p">,</span> <span class="mf">0.02224392</span><span class="p">,</span> <span class="mf">0.01893446</span><span class="p">,</span>
                   <span class="mf">0.02032697</span><span class="p">,</span> <span class="mf">0.01955838</span><span class="p">,</span> <span class="mf">0.02504702</span><span class="p">,</span> <span class="mf">0.0303503</span> <span class="p">,</span> <span class="mf">0.01884856</span><span class="p">,</span>
                   <span class="mf">0.01970757</span><span class="p">])</span>

<span class="n">han_p1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.04134567</span><span class="p">,</span> <span class="mf">0.02829771</span><span class="p">,</span> <span class="mf">0.02776874</span><span class="p">,</span> <span class="mf">0.02464012</span><span class="p">,</span> <span class="mf">0.02676957</span><span class="p">,</span>
                   <span class="mf">0.02323857</span><span class="p">,</span> <span class="mf">0.02190032</span><span class="p">,</span> <span class="mf">0.02336064</span><span class="p">,</span> <span class="mf">0.02458587</span><span class="p">,</span> <span class="mf">0.02843334</span><span class="p">,</span>
                   <span class="mf">0.02278194</span><span class="p">,</span> <span class="mf">0.0234375</span> <span class="p">,</span> <span class="mf">0.0245723</span> <span class="p">,</span> <span class="mf">0.01984321</span><span class="p">,</span> <span class="mf">0.0202908</span> <span class="p">,</span>
                   <span class="mf">0.02269604</span><span class="p">,</span> <span class="mf">0.02164261</span><span class="p">,</span> <span class="mf">0.02235243</span><span class="p">,</span> <span class="mf">0.0218099</span> <span class="p">,</span> <span class="mf">0.01967593</span><span class="p">,</span>
                   <span class="mf">0.02084238</span><span class="p">])</span>

<span class="n">han_p0_reset</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.01406069</span><span class="p">,</span> <span class="mf">0.01524523</span><span class="p">,</span> <span class="mf">0.01619014</span><span class="p">,</span> <span class="mf">0.01575611</span><span class="p">,</span> <span class="mf">0.01321524</span><span class="p">,</span>
                         <span class="mf">0.014662</span>  <span class="p">,</span> <span class="mf">0.016909</span>  <span class="p">,</span> <span class="mf">0.01762334</span><span class="p">,</span> <span class="mf">0.01737015</span><span class="p">,</span> <span class="mf">0.01768663</span><span class="p">,</span>
                         <span class="mf">0.01373517</span><span class="p">,</span> <span class="mf">0.01681858</span><span class="p">,</span> <span class="mf">0.01458514</span><span class="p">,</span> <span class="mf">0.01574255</span><span class="p">,</span> <span class="mf">0.01363118</span><span class="p">,</span>
                         <span class="mf">0.01548485</span><span class="p">,</span> <span class="mf">0.01806641</span><span class="p">,</span> <span class="mf">0.02033601</span><span class="p">,</span> <span class="mf">0.01825177</span><span class="p">,</span> <span class="mf">0.0141059</span> <span class="p">,</span>
                         <span class="mf">0.01436813</span><span class="p">])</span>

<span class="n">han_p1_reset</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.02414732</span><span class="p">,</span> <span class="mf">0.02224392</span><span class="p">,</span> <span class="mf">0.01856373</span><span class="p">,</span> <span class="mf">0.01732946</span><span class="p">,</span> <span class="mf">0.01853208</span><span class="p">,</span>
                         <span class="mf">0.02104583</span><span class="p">,</span> <span class="mf">0.01800311</span><span class="p">,</span> <span class="mf">0.01953577</span><span class="p">,</span> <span class="mf">0.01612232</span><span class="p">,</span> <span class="mf">0.02009639</span><span class="p">,</span>
                         <span class="mf">0.01692256</span><span class="p">,</span> <span class="mf">0.016267</span>  <span class="p">,</span> <span class="mf">0.0181297</span> <span class="p">,</span> <span class="mf">0.01756004</span><span class="p">,</span> <span class="mf">0.01476147</span><span class="p">,</span>
                         <span class="mf">0.02139847</span><span class="p">,</span> <span class="mf">0.01590079</span><span class="p">,</span> <span class="mf">0.02293566</span><span class="p">,</span> <span class="mf">0.01738824</span><span class="p">,</span> <span class="mf">0.0153673</span> <span class="p">,</span>
                         <span class="mf">0.02173756</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">default_rep_delay</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;dashed&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">rep_range</span><span class="p">,</span> <span class="n">han_p0</span><span class="p">,</span> <span class="s1">&#39;o&#39;</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;prep0_error&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">rep_range</span><span class="p">,</span> <span class="n">han_p1</span><span class="p">,</span> <span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;prep1_error&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">rep_range</span><span class="p">,</span> <span class="n">han_p0_reset</span><span class="p">,</span> <span class="s1">&#39;o&#39;</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;prep0_error_reset&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">rep_range</span><span class="p">,</span> <span class="n">han_p1_reset</span><span class="p">,</span> <span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;prep1_error_reset&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.05</span><span class="p">])</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Rep delay&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Avg. error rate&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1"> SPAM vs rep_delay&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;ibm_hanoi&#39;</span><span class="p">),</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">yticks</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/dc86a62cd27295ac2182e58acc2e7a8858ed2ab5462ee43265a72df227e1df9c.png" src="../../_images/dc86a62cd27295ac2182e58acc2e7a8858ed2ab5462ee43265a72df227e1df9c.png" />
</div>
</div>
</section>
<section id="perth">
<h3>Perth<a class="headerlink" href="#perth" title="Permalink to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">default_rep_delay</span> <span class="o">=</span> <span class="mf">250e-6</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">per_p0</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.01656669</span><span class="p">,</span> <span class="mf">0.01691546</span><span class="p">,</span> <span class="mf">0.01621791</span><span class="p">,</span> <span class="mf">0.01632254</span><span class="p">,</span> <span class="mf">0.01703753</span><span class="p">,</span>
                   <span class="mf">0.01708984</span><span class="p">,</span> <span class="mf">0.01771763</span><span class="p">,</span> <span class="mf">0.01710728</span><span class="p">,</span> <span class="mf">0.0171596</span> <span class="p">,</span> <span class="mf">0.01956613</span><span class="p">,</span>
                   <span class="mf">0.01864188</span><span class="p">,</span> <span class="mf">0.0212228</span> <span class="p">,</span> <span class="mf">0.01794434</span><span class="p">,</span> <span class="mf">0.01846749</span><span class="p">,</span> <span class="mf">0.0183803</span> <span class="p">,</span>
                   <span class="mf">0.01789202</span><span class="p">,</span> <span class="mf">0.01787458</span><span class="p">,</span> <span class="mf">0.02239118</span><span class="p">,</span> <span class="mf">0.01893834</span><span class="p">,</span> <span class="mf">0.01932199</span><span class="p">,</span>
                   <span class="mf">0.01776995</span><span class="p">])</span>

<span class="n">per_p1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.02807617</span><span class="p">,</span> <span class="mf">0.02748326</span><span class="p">,</span> <span class="mf">0.02842494</span><span class="p">,</span> <span class="mf">0.02622768</span><span class="p">,</span> <span class="mf">0.02617536</span><span class="p">,</span>
                   <span class="mf">0.02645438</span><span class="p">,</span> <span class="mf">0.02486747</span><span class="p">,</span> <span class="mf">0.02638463</span><span class="p">,</span> <span class="mf">0.02922712</span><span class="p">,</span> <span class="mf">0.02889579</span><span class="p">,</span>
                   <span class="mf">0.02802386</span><span class="p">,</span> <span class="mf">0.02934919</span><span class="p">,</span> <span class="mf">0.03198242</span><span class="p">,</span> <span class="mf">0.03259277</span><span class="p">,</span> <span class="mf">0.02905273</span><span class="p">,</span>
                   <span class="mf">0.02870396</span><span class="p">,</span> <span class="mf">0.03168597</span><span class="p">,</span> <span class="mf">0.02751814</span><span class="p">,</span> <span class="mf">0.02532087</span><span class="p">,</span> <span class="mf">0.02511161</span><span class="p">,</span>
                   <span class="mf">0.02533831</span><span class="p">])</span>

<span class="n">per_p0_reset</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.0144043</span> <span class="p">,</span> <span class="mf">0.0150844</span> <span class="p">,</span> <span class="mf">0.01532854</span><span class="p">,</span> <span class="mf">0.01675851</span><span class="p">,</span> <span class="mf">0.01766532</span><span class="p">,</span>
                         <span class="mf">0.01571219</span><span class="p">,</span> <span class="mf">0.01473563</span><span class="p">,</span> <span class="mf">0.01536342</span><span class="p">,</span> <span class="mf">0.01595633</span><span class="p">,</span> <span class="mf">0.01642718</span><span class="p">,</span>
                         <span class="mf">0.01599121</span><span class="p">,</span> <span class="mf">0.01442174</span><span class="p">,</span> <span class="mf">0.01459612</span><span class="p">,</span> <span class="mf">0.0140904</span> <span class="p">,</span> <span class="mf">0.01487514</span><span class="p">,</span>
                         <span class="mf">0.0140904</span> <span class="p">,</span> <span class="mf">0.01438686</span><span class="p">,</span> <span class="mf">0.01398577</span><span class="p">,</span> <span class="mf">0.01290458</span><span class="p">,</span> <span class="mf">0.01334054</span><span class="p">,</span>
                         <span class="mf">0.01447405</span><span class="p">])</span>

<span class="n">per_p1_reset</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.02108329</span><span class="p">,</span> <span class="mf">0.02169364</span><span class="p">,</span> <span class="mf">0.02216448</span><span class="p">,</span> <span class="mf">0.02361189</span><span class="p">,</span> <span class="mf">0.02394322</span><span class="p">,</span>
                         <span class="mf">0.02521624</span><span class="p">,</span> <span class="mf">0.02462333</span><span class="p">,</span> <span class="mf">0.02594866</span><span class="p">,</span> <span class="mf">0.02624512</span><span class="p">,</span> <span class="mf">0.02553013</span><span class="p">,</span>
                         <span class="mf">0.0249721</span> <span class="p">,</span> <span class="mf">0.02610561</span><span class="p">,</span> <span class="mf">0.02657645</span><span class="p">,</span> <span class="mf">0.02012416</span><span class="p">,</span> <span class="mf">0.0213623</span> <span class="p">,</span>
                         <span class="mf">0.02223424</span><span class="p">,</span> <span class="mf">0.02239118</span><span class="p">,</span> <span class="mf">0.02205985</span><span class="p">,</span> <span class="mf">0.02251325</span><span class="p">,</span> <span class="mf">0.02179827</span><span class="p">,</span>
                         <span class="mf">0.02319336</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">default_rep_delay</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;dashed&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">rep_range</span><span class="p">,</span> <span class="n">per_p0</span><span class="p">,</span> <span class="s1">&#39;o&#39;</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;prep0_error&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">rep_range</span><span class="p">,</span> <span class="n">per_p1</span><span class="p">,</span> <span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;prep1_error&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">rep_range</span><span class="p">,</span> <span class="n">per_p0_reset</span><span class="p">,</span> <span class="s1">&#39;o&#39;</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;prep0_error_reset&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">rep_range</span><span class="p">,</span> <span class="n">per_p1_reset</span><span class="p">,</span> <span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;prep1_error_reset&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.05</span><span class="p">])</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Rep delay&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Avg. error rate&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1"> SPAM vs rep_delay&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;ibm_perth&#39;</span><span class="p">),</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">yticks</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/6d3ca031e9b57e08dd6c7c4017218201be946cde1ac814e1f58524a81c1af1d7.png" src="../../_images/6d3ca031e9b57e08dd6c7c4017218201be946cde1ac814e1f58524a81c1af1d7.png" />
</div>
</div>
</section>
</section>
</section>

<div class="section ablog__blog_comments">
  
  


<div class="section ablog__prev-next">
  <span class="ablog__prev">
    
    
    <a href="2021-10-31-best_swap_mapper_qiskit.html">
      
      <i class="fa fa-arrow-circle-left"></i>
      
      <span>Choosing the best Qiskit swap mapper</span>
    </a>
    
  </span>
  <span class="ablog__spacer">&nbsp;</span>
  <span class="ablog__next">
    
    
    <a href="2021-11-28-falcon_r5.html">
      <span>Comparison of Falcon R5 processors verse R4</span>
      
      <i class="fa fa-arrow-circle-right" ></i>
      
    </a>
    
  </span>
</div>

  
  
</div>

                </article>
              
              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#summary">Summary</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#average-spam-error-rate-per-qubit">Average SPAM error rate per qubit</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#frontmatter">Frontmatter</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#define-needed-functions">Define needed functions</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#experiments">Experiments</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#effect-of-rep-delay-on-state-prep-error">Effect of <code class="docutils literal notranslate"><span class="pre">rep_delay</span></code> on state prep error</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#q-manila-system">5Q Manila system</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#spam-error-rate-with-no-resets">SPAM error rate with no resets</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#spam-error-rate-with-reset-and-no-implicit-reset">SPAM error rate with reset and NO implicit reset</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#spam-error-rate-using-3x-resets">SPAM error rate using 3x resets</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#q-jakarta-system">7Q Jakarta system</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#spam-error-rate">SPAM error rate</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">SPAM error rate using 3x resets</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#data-for-other-systems">Data for other systems</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#montreal">Montreal</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#hanoi">Hanoi</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#perth">Perth</a></li>
</ul>
</li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
  <div class="tocsection sourcelink">
    <a href="../../_sources/posts/2021/2021-11-07-rep_delay.ipynb.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

<footer class="bd-footer">
<div>
<p xmlns:cc="http://creativecommons.org/ns#" xmlns:dct="http://purl.org/dc/terms/">
        Content on
        <a property="dct:title" rel="cc:attributionURL" href="http://quantum-enablement.org">this website</a> 
        by <span property="cc:attributionName">IBM</span> is licensed under 
        <a href="http://creativecommons.org/licenses/by-nc/4.0/?ref=chooser-v1" target="_blank" rel="license noopener noreferrer" style="display:inline-block;">
                Attribution-NonCommercial 4.0 International<img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/cc.svg?ref=chooser-v1">
                <img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/by.svg?ref=chooser-v1">
                <img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/nc.svg?ref=chooser-v1">
        </a>
</p> 
</div>
</footer>

  </body>
</html>